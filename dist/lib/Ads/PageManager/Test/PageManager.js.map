{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/Ads/Ad/Base/Ad.js","webpack:///./src/lib/Ads/Ad/Base/AdBehaviour.js","webpack:///./src/lib/Ads/Ad/Base/AdService.js","webpack:///./src/lib/Ads/Ad/Display/AdDisplayRequest.js","webpack:///./src/lib/Ads/Ad/Display/AppNexus/AppNexusService.js","webpack:///./src/lib/Ads/Ad/Display/GPT/GPTRequest.js","webpack:///./src/lib/Ads/Ad/Display/GPT/GPTService.js","webpack:///./src/lib/Ads/Ad/Video/OutStream/Ava.js","webpack:///./src/lib/Ads/Ad/Video/OutStream/Intext.js","webpack:///./src/lib/Ads/Ad/behaviours/Scheduled.js","webpack:///./src/lib/Ads/AdController/AdController.js","webpack:///./src/lib/Ads/Container/BaseContainer.js","webpack:///./src/lib/Ads/Container/ContainerService.js","webpack:///./src/lib/Ads/Container/lib/DivNode.js","webpack:///./src/lib/Ads/PageManager/PageManager.js","webpack:///./src/lib/Ads/PageManager/Test/PageManager.js","webpack:///./src/lib/Arch/Evented.js","webpack:///./src/lib/Arch/Promised.js","webpack:///./src/lib/Arch/SMCPromise.js","webpack:///./src/lib/Browser/Browser.js","webpack:///./src/lib/Browser/Cookie.js","webpack:///./src/lib/Browser/CrossCompat.js","webpack:///./src/lib/Browser/Geometry.js","webpack:///./src/lib/Browser/PageStats.js","webpack:///./src/lib/Browser/Scheduler.js","webpack:///./src/lib/Browser/Timing.js","webpack:///./src/lib/Browser/UUID.js","webpack:///./src/lib/Browser/UrlInfo.js","webpack:///./src/lib/Common.js","webpack:///./src/lib/Config/ConditionalConfig.js","webpack:///./src/lib/Log/BaseLogger.js","webpack:///./src/lib/Log/ConsoleLogger.js","webpack:///./src/lib/Network.js","webpack:///./src/lib/Parser/Conditionals.js","webpack:///./src/lib/Service/Service.js","webpack:///./src/lib/Service/ServiceContainer.js"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAA6B;AAC7B,qCAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAqB,gBAAgB;AACrC;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,6BAAqB,gBAAgB;AACrC;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAAkB,8BAA8B;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,2BAA2B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAAmB,cAAc;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAgB,KAAK;AACrB;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,wBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,uCAAuC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,uCAAuC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,kBAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAc,wCAAwC;AACtD;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,8CAAsC,uBAAuB;;;AAG7D;AACA;;;;;;;;;;;;;;;;;;ACtxBA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC,oCAAoC;AACpC,0CAA0C;AAC1C,qCAAqC;AACrC,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kBAAkB;AAC5D;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;ACRA;AACkB;AAClB;AACA;AACA,sCAAsC;AACtC,sCAAsC;AACtC,sCAAsC;AACtC,sCAAsC;;;AAGtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gGAAkD,YAAY;AAC9D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,4FAA8C,YAAY;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA,gGAAkD,cAAc;AAChE;AACA;AACA;AACA,oGAAsD,8BAA8B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,C;;;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;;AAEb;AACA;AACA,SAAS;;AAET;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3VA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,uFAAuF,iDAAiD;AACxI;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,4BAA4B;AAC/D;AACA,mCAAmC,wCAAwC;AAC3E;AACA,2CAA2C,oDAAoD;AAC/F;AACA;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG;AAChG,6GAA6G;AAC7G;;AAEA;AACA;AACA;AACA;AACA,4HAA4H;;AAE5H;AACA;AACA;;AAEA,qBAAqB;AACrB;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uEAAuE;;AAEvE;AACA;AACA;;AAEA;AACA,oLAAoL;AACpL;AACA;;AAEA,qBAAqB;AACrB,iBAAiB;AACjB;;AAEA;AACA,aAAa;AACb;AACA,mEAAmE;AACnE,yLAAyL;AACzL;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;;;AAGA,SAAS;AACT;AACA,gFAAgF;AAChF;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA;AACA,kCAAkC;AAClC;AACA,SAAS;;AAET;AACA,oCAAoC;AACpC,gGAAgG;AAChG;AACA;AACA;AACA,iBAAiB;;AAEjB,aAAa;;AAEb;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;;AAEA;AACA;;;AAGA,iBAAiB;AACjB;AACA;AACA;;AAEA;;;;;AAKA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA,G;;;;;;;;;;;;;;;;;ACneA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;;;;;;ACpCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,8EAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,qBAAqB;AAC9F;AACA;AACA;AACA;AACA;AACA,8EAA8E,qBAAqB;AACnG;AACA,C;;;;;;;;;;;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,iCAAiC,8EAAuB;AACxD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,0BAA0B,MAAM,mFAAmF;;AAEnH;AACA;AACA;;;AAGA;AACA,kB;;;;;;;;;;;;;;AC7IA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACtHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;;AC3JA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd,oBAAoB;AACpB,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iDAAiD,EAAE;AACnG,oDAAoD,2CAA2C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;;;;;;;;;;;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;AC9NA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,uDAAuD;AACvD;;AAEA;AACA;AACA,qCAAqC;AACrC,gBAAgB,cAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK,OAAO,cAAc;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK,OAAO,cAAc;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,wDAAwD,sDAAsD;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2BAAkC;AAClC,4BAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;;;;;;;;;;;;;;;;;;ACzQA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,iBAAiB,YAAY,gBAAgB;AAClF,qCAAqC,iBAAiB,YAAY,eAAe;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sCAAsC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB,IAAI;AAC5B;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,C;;;;;;;;;;;;;;;;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAA8C,kCAAkC,mGAA0D;AAC1I;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,0DAA0D,cAAc;AACxE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,UAAU;AAC7D;AACA,C;;;;;;;;;;;;;;AC7JA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,eAAe;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClFA;AAAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D;;AAEA,oBAAoB,oBAAoB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uBAAuB;AACzF;AACA;;;;;;;;;;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B,2BAA2B,4EAA8B,2BAA2B;AACpF;AACA;AACA;AACA;AACA,gGAAkD,2BAA2B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,C;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;AC9Bc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0BAA0B,oCAAoC;AAC9D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C,uBAAuB,sBAAsB;AAC7C,sBAAsB,uCAAuC;AAC7D,sBAAsB,uCAAuC;AAC7D,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,8BAA8B;AACzG,sCAAsC,aAAa;AACnD,wFAAwF;AACxF,4EAA4E,UAAU,iBAAiB,cAAc,uCAAuC,0BAA0B,EAAE;AACxL,mDAAmD;AACnD,8BAA8B;AAC9B,qBAAqB;AACrB,sCAAsC;AACtC;AACA,4BAA4B;;AAE5B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA,+BAA+B,8BAA8B;AAC7D;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,yBAAyB,EAAE;AAC/F,oEAAoE,yBAAyB,EAAE;AAC/F;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,yBAAyB,EAAE;AAC/F,oEAAoE,yBAAyB,EAAE;AAC/F;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B,qBAAqB;AAChD;AACA;;AAEA;;AAEA;AACA,sCAAsC,yBAAyB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,qDAAqD,2CAA2C;AAChG;;AAEA,+BAA+B;;AAE/B,0CAA0C,kCAAkC;AAC5E;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,8BAA8B,iCAAiC;AAC9G;AACA;AACA;AACA;AACA,yCAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,2CAA2C;AACrG;AACA;AACA,kDAAkD,UAAU,iBAAiB,cAAc,uCAAuC,0BAA0B,EAAE;AAC9J,mDAAmD,sCAAsC;AACzF;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA,yCAAyC,+BAA+B;AACxE;AACA;AACA;AACA;AACA,yCAAyC,8BAA8B;AACvE;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mDAAmD,QAAQ;;AAE3D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,kBAAkB;AAC1E;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,gEAAgE,kBAAkB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,kBAAkB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,gEAAgE,kBAAkB;AAClF;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,4DAA4D,mBAAmB;AAC/E;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,gEAAgE,mBAAmB;AACnF;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,oEAAoE,mBAAmB;AACvF;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,wEAAwE,mBAAmB;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,oDAAoD,kBAAkB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,oEAAoE,mBAAmB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,wEAAwE,mBAAmB;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mBAAmB;AACnE;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA,gDAAgD,mBAAmB;AACnE;;AAEA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD,+BAA+B,sBAAsB;AACrD,8BAA8B,uCAAuC;AACrE,8BAA8B,uCAAuC;AACrE,oCAAoC,wBAAwB;AAC5D;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA,mCAAmC,eAAe;AAClD,mCAAmC,eAAe;AAClD;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;;;;;;;;;;;;;;;;AC/kCL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;AC3BA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qBAAqB,oCAAoC;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"lib/Ads/PageManager/Test/PageManager.js","sourcesContent":[" \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\t;\n \t\thead.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"94d4d420eb170d524f43\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (typeof dep === \"undefined\") hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (typeof dep === \"undefined\") hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = \"main\";\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\t/*globals chunkId */\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.slice().map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted\n \t\t\t)\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Not in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(\"./src/lib/Ads/PageManager/Test/PageManager.js\")(__webpack_require__.s = \"./src/lib/Ads/PageManager/Test/PageManager.js\");\n","import Promised from \"../../../Arch/Promised\"\r\nimport * as Common from \"../../../Common\";\r\nimport UUID from \"../../../Browser/UUID\";\r\n\r\nexport default class Ad extends Promised\r\n{\r\n    static get EVENT_AD_AVAILABLE(){return 1;}\r\n    static get EVENT_AD_EMPTY()    { return 2;}\r\n    static get EVENT_VISIBILITY_CHANGE() {return 3;}\r\n    static get EVENT_SLOT_VISIBLE() {return  4;}\r\n    static get EVENT_AD_ERROR() {return 5;}\r\n\r\n    constructor(serviceContainer,slotId,slotConfig,config)\r\n    {\r\n        super();\r\n        this.id=UUID();\r\n        this.slotId=slotId;\r\n        this.logger=serviceContainer.get(\"Log\");\r\n        this.logger.debug(\"Creando anuncio\");\r\n        this.config=config;\r\n        this.adConfig=slotConfig.ad;\r\n        this.container=null;\r\n        this.adService=serviceContainer.get(this.getServiceName());\r\n        this.behaviours={};\r\n        this.serviceContainer=serviceContainer;\r\n        this.request=null;\r\n        this.empty=null;\r\n        this.errored=false;\r\n    }\r\n\r\n    initialize()\r\n    {\r\n        this.prependPromises({\r\n            \"configured\":\"Requesting\",\r\n            \"attached\":this.isPrefetching()?\"Displaying\":\"Requesting\",\r\n            \"loaded\":\"Loaded\",\r\n            \"destroyed\":\"Destroyed\",\r\n            \"displayed\":\"Displayed\",\r\n            \"impression\":\"Impression\",\r\n            \"ready\":\"Ready\"}\r\n        );\r\n        this.before(\"Created\").wait(this.adService.isInState(\"Configured\"));\r\n        if(this.adConfig.behaviours!=undefined)\r\n        {\r\n            for(let k in this.adConfig.behaviours)\r\n            {\r\n                let i=this.adConfig.behaviours[k];\r\n                let newI=new i.type(this.serviceContainer,this,i.config);\r\n                newI.initialize();\r\n                this.behaviours[k]=newI;\r\n            }\r\n        }\r\n        this.run([\"Created\",\"Ready\",\"Configuring\",\"Requesting\",\"Loaded\",\"Displayed\",\"Impression\",\"Idle\",\"Destroyed\"]);\r\n    }\r\n\r\n    // Created se dispara cuando hay un ad potencialmente disparable.Aun no se sabe si esta enabled o no.\r\n    onCreated(){\r\n        if(this.config[\"slots\"][this.slotId].enabled) {\r\n\r\n            this.resolve(\"ready\");\r\n        }\r\n    }\r\n\r\n    attach(container)\r\n    {\r\n        this.container=container;\r\n        this.resolve(\"attached\");\r\n        this.debug(\"AD_ATTACHED\");\r\n    }\r\n\r\n    // Ready se dispara cuando se ha comprobado que este ad slot esta activo.\r\n    onReady(){\r\n        this.debug(\"AD_READY\");\r\n    }\r\n    // Configuring se dispara cuando el ad esta configurado a nivel de tamanios, targeting,etc\r\n    onConfiguring(){\r\n        this.debug(\"AD_Configuring\");\r\n        this.adService.configureAd(this);\r\n        this.resolve(\"configured\");\r\n    }\r\n    // Requested se dispara cuando se realiza la peticion de anuncio al backend\r\n    onRequesting()\r\n    {\r\n        this.debug(\"AD_REQUESTING\");\r\n        this.request=this.adService.requestAd(this);\r\n\r\n        this.addListener(\"EVENT_AD_EMPTY\",null,()=>{\r\n            this.gotoState(\"Idle\");\r\n            }\r\n        );\r\n        this.request.id=this.id;\r\n    }\r\n    setLoaded()\r\n    {\r\n        this.resolve(\"loaded\");\r\n    }\r\n    onLoaded()\r\n    {\r\n        this.debug(\"AD_LOADED\");\r\n    }\r\n\r\n    setDisplayed()\r\n    {\r\n        this.resolve(\"displayed\");\r\n    }\r\n    // Displayed se dispara cuando el anuncio ha terminado de mostrarse\r\n    onDisplayed(){\r\n        this.debug(\"AD_DISPLAYED\");\r\n    }\r\n    gotImpression()\r\n    {\r\n        this.resolve(\"impression\");\r\n    }\r\n    // Impression se dispara cuando el anuncio ha dado impresion\r\n    onImpression(){\r\n        this.debug(\"AD_IMPRESSION\");\r\n    }\r\n    // Destroyed es disparado cuando el anuncio es destruido desde fuera\r\n    onIdle(){\r\n        this.debug(\"AD_IDLE\");\r\n    }\r\n    destroy()\r\n    {\r\n        this.resolve(\"destroyed\");\r\n    }\r\n    onDestroyed()\r\n    {\r\n        this.debug(\"AD_DESTROYED\");\r\n    }\r\n\r\n    /**\r\n     *     UTILITY METHODS\r\n     */\r\n\r\n    isPrefetching()\r\n    {\r\n        return this.adConfig.prefetch || false;\r\n    }\r\n    getServiceName()\r\n    {\r\n        return this.adConfig.adProvider;\r\n    }\r\n    getServiceParam(service,param)\r\n    {\r\n        if(this.adConfig[service]===undefined)\r\n            return null;\r\n        if(param===undefined)\r\n            return this.adConfig[service];\r\n\r\n        return (this.adConfig[service][param]!==undefined)?this.adConfig[service][param]:null;\r\n    }\r\n    getTargeting()\r\n    {\r\n        return {\r\n            \"adId\":this.id\r\n        }\r\n    }\r\n    getSizes()\r\n    {\r\n        return this.adConfig.sizes===undefined?[]:this.adConfig.sizes;\r\n    }\r\n    getContainer()\r\n    {\r\n        return this.container;\r\n    }\r\n    getBehaviour(beh)\r\n    {\r\n        if(this.adConfig.behaviours===undefined)\r\n            return null;\r\n        if(this.adConfig.behaviours[beh]===undefined)\r\n            return null;\r\n        return this.adConfig.behaviours[beh].config;\r\n    }\r\n    getCurrentRequest()\r\n    {\r\n        return this.currentRequest;\r\n    }\r\n    isEmpty()\r\n    {\r\n        return this.empty;\r\n    }\r\n    setErrored(code)\r\n    {\r\n        this.errored=true;\r\n        this.fireEvent(Ad.EVENT_AD_ERROR,{ad:this,code:code});\r\n    }\r\n    debug(str)\r\n    {\r\n        console.log(\"[AD \"+this.id+\"]:\"+str);\r\n    }\r\n\r\n}","export default class AdBehaviour\r\n{\r\n    constructor(serviceContainer,ad,config)\r\n    {\r\n        this.ad=ad;\r\n        this.config=config;\r\n        this.serviceContainer=serviceContainer;\r\n    }\r\n}","import Service from \"../../../Service/Service\"\r\nimport {deepmerge} from \"../../../Common\"\r\nexport default class AdService extends Service\r\n{\r\n    static get EVENT_SERVICE_LOADED(){ return \"EVENT_SERVICE_LOADED\";}\r\n    static get EVENT_SERVICE_ERROR() { return \"EVENT_SERVICE_ERROR\";}\r\n    static get ADSERVICE_DISPLAY()   { return \"Display\";}\r\n    static get ADSERVICE_VIDEO()     { return \"Video\";}\r\n\r\n\r\n    constructor(serviceContainer,config)\r\n    {\r\n        super(serviceContainer,config);\r\n        this.registeredAds=[];\r\n    }\r\n    initialize()\r\n    {\r\n        this.prependPromises({\"ready\":\"Ready\"});\r\n        this.run([\"Initialized\",\"Configured\",\"Ready\"]);\r\n    }\r\n    createRequest(ad)\r\n    {\r\n\r\n    }\r\n    getSlotConfiguration(id)\r\n    {\r\n        let results=[this.config.slots.default || {}];\r\n        if(this.config.slots[id]===\"undefined\")\r\n            throw \"Unknown slot:\"+id;\r\n        let byIdConfig=this.config.slots[id].ad;\r\n        results.push(byIdConfig);\r\n        if(byIdConfig.tags)\r\n        {\r\n            for(var k in byIdConfig.tags)\r\n            {\r\n                // Crear un objeto, para permitir tests para incluir o no la\r\n                // template (ej, a/b testing, condiciones sobre viewability,etc.\r\n                // Permitir templates dentro de templates.\r\n                // Las templates tambien deben permitir establecer targetings.\r\n                if(this.config.tags[k]!==undefined)\r\n                    results.push(this.config.tags[k]);\r\n            }\r\n        }\r\n        return deepmerge.all.apply(null,results);\r\n    }\r\n    registerAd(ad)\r\n    {\r\n        this.registeredAds.push(ad);\r\n    }\r\n    configureAd(ad)\r\n    {\r\n    }\r\n    getTagName()\r\n    {\r\n        return \"generic\";\r\n    }\r\n    getAdServiceType()\r\n    {\r\n        return AdService.ADSERVICE_DISPLAY;\r\n    }\r\n}","import Promised from \"../../../Arch/Promised\";\r\nimport Timing from \"../../../Browser/Timing\";\r\nimport * as Common from \"../../../Common\";\r\nimport Ad from \"../Base/Ad\";\r\n\r\nexport default class AdDisplayRequest extends Promised {\r\n    constructor(serviceContainer, ad) {\r\n        super();\r\n        this.ad = ad;\r\n        this.id = ad.id;\r\n        this.data = {\r\n            id: null,\r\n            requestTimestamp: Timing.timestamp(), //\r\n            requestTime: Timing.relative(),\r\n            requestSentTime: null,\r\n            requestSentLocalTime:null,\r\n            loadTime: null,\r\n            loadLocalTime: null,\r\n            displayStartTime:null,\r\n            displayStartLocalTime:null,\r\n            displayTime: null,\r\n            displayLocalTime: null,\r\n            requestToDisplayTime:null,\r\n\r\n            impression:false,\r\n            impressionTime:null,\r\n            impressionLocalTime:null,\r\n\r\n            requestedSizes: null,\r\n\r\n            viewable: false,\r\n            viewableTime: null,\r\n            viewableLocalTime: null,\r\n\r\n            maxViewability: 0,\r\n            errorCount:0,\r\n            lastErrorCode:0,\r\n            lastErrorMessage:0,\r\n\r\n            lineItemId: null,\r\n            advertiserId: null,\r\n            isEmpty: true,\r\n            campaignId: null,\r\n            creativeId: null,\r\n            receivedSize: null,\r\n\r\n            innerAdUnit: typeof window._SMCMacroSite === \"undefined\" ? \"Unknown\" : window._SMCMacroSite,\r\n            finished: null\r\n        };\r\n        var sizes = this.ad.getSizes();\r\n        if(typeof sizes[0]===\"number\")\r\n            sizes=[sizes];\r\n\r\n        this.data.requestedSizes = sizes.map(function (i) {\r\n            if (Common.isArray(i))\r\n                return i[0] + 'x' + i[1];\r\n            if (Common.isString(i))\r\n                return i;\r\n            return \"\"\r\n        }).sort().join(\",\");\r\n\r\n    }\r\n\r\n    toRelative() {\r\n        return Timing.relative() - this.data.requestTime;\r\n    }\r\n\r\n    onRequested(event) {\r\n        this.data.requestSentTime = Timing.relative();\r\n        this.data.requestSentLocalTime = this.toRelative();\r\n    }\r\n    onLoaded(event)\r\n    {\r\n        this.data.loadTime= Timing.relative();\r\n        this.data.loadLocalTime = this.toRelative();\r\n        this.ad.onLoaded();\r\n    }\r\n\r\n    onViewable(event) {\r\n        this.data.viewable = true;\r\n        this.data.viewableTime = Timing.relative();\r\n        this.data.viewableLocalTime = this.toRelative();\r\n        this.ad.fireEvent(Ad.EVENT_SLOT_VISIBLE, {ad: this.ad});\r\n    }\r\n\r\n    onDisplayStart(event) {\r\n        this.data.displayStartTime=Timimng.relative();\r\n        this.data.displayStartLocalTime=this.toRelative();\r\n    }\r\n\r\n    onDisplayEnded(event) {\r\n        this.ad.setDisplayed();\r\n        this.data.displayTime = Timing.relative();\r\n        this.data.displayLocalTime = this.toRelative();\r\n        this.data.requestToDisplayTime=this.data.displayLocalTime - this.data.requestSentLocalTime;\r\n\r\n    }\r\n\r\n    onEmpty() {\r\n        this.data.isEmpty = true;\r\n        this.ad.log(\"EMPTY\");\r\n        this.ad.fireEvent(Ad.EVENT_AD_EMPTY, {ad: this.ad});\r\n    }\r\n\r\n    onAdReceived(advertiser, campaign, creative, lineItem) {\r\n        this.data[\"advertiserId\"] = advertiser;\r\n        this.data[\"campaignId\"] = campaign;\r\n        this.data[\"creativeId\"] = creative;\r\n        this.data[\"lineItemId\"] = lineItem;\r\n        this.ad.fireEvent(Ad.EVENT_AD_AVAILABLE, {slot: this.ad});\r\n    }\r\n    onSlotVisibilityChange(percent)\r\n    {\r\n        this.ad.fireEvent(Ad.EVENT_VISIBILITY_CHANGE,{ad:this.ad,visibility:percent});\r\n    }\r\n    onImpression()\r\n    {\r\n        this.data.impression=true;\r\n        this.data.impressionTime=Timing.relative();\r\n        this.data.impressionLocalTime=this.toRelative();\r\n    }\r\n    addProperty(key, value) {\r\n        this.data[key] = value;\r\n    }\r\n    onError()\r\n    {\r\n\r\n    }\r\n    finish() {\r\n    }\r\n}","import AdService from \"../../Base/AdService\"\r\nimport * as Common from \"../../../../Common\"\r\nimport * as Network from \"../../../../Network\";\r\nimport SMCPromise from \"../../../../Arch/SMCPromise\"\r\nexport default class AppNexusService extends AdService\r\n{\r\n    onInitialized(){\r\n        /* Se carga la libreria js de google */\r\n        if(window.apntag===undefined)\r\n        {\r\n            window.apntag={anq:[]};\r\n        }\r\n        this.loadPromise=SMCPromise();\r\n        this.loaded=false;\r\n        this.apn=window.apntag;\r\n        this.slotFromAd={};\r\n        if(this.config.autoload)\r\n            this.load();\r\n    }\r\n    onConfigured(){\r\n        this.apn.anq.push(\r\n          ()=>\r\n          {\r\n              this.apn.setPageOpts({\r\n                  member:this.config.member\r\n              });\r\n          }\r\n        );\r\n    }\r\n    onReady(){}\r\n\r\n    onEvent(id,slot,message) {\r\n\r\n        if(this.eventsById[id]===undefined) {\r\n            cosole.log(\"EVENTO DESCONOCIDO:\"+id);\r\n            return;\r\n        }\r\n        // Lanzar eventos para plugins.\r\n        console.log(id+\":\"+this.eventsById[id]+\":\"+message);\r\n    }\r\n\r\n    requestAd(ad)\r\n    {\r\n\r\n    }\r\n    displayAd(ad)\r\n    {\r\n        this.apn.anq.push(()=>{\r\n            //this.apn.refresh([ad.getContainer().getId()]);\r\n            this.apn.showTag([ad.getContainer().getId()]);\r\n            this.apn.loadTags();\r\n        });\r\n    }\r\n    configureAd(ad)\r\n    {\r\n        this.load();\r\n        ad.before(\"Requesting\").wait(this.loadPromise);\r\n        this.apn.anq.push(()=>{\r\n            let contId=ad.getContainer().getId();\r\n            this.apn.defineTag({\r\n                tagId: ad.getServiceParam(\"AppNexus\",\"adunit\"),\r\n                sizes: ad.getSizes(),\r\n                targetId: contId\r\n            });\r\n            let targeting=ad.getTargeting();\r\n            this.apn.setKeywords(contId,targeting);\r\n            this.slotFromAd[contId]=ad;\r\n            }\r\n        );\r\n    }\r\n    load()\r\n    {\r\n        if(this.loaded)\r\n            return;\r\n        this.apn.anq.push(()=> this.resolve(\"gptPromise\"));\r\n        Network.asyncLoad(\"//acdn.adnxs.com/ast/ast.js\")\r\n            .then(()=>{\r\n                this.loaded=true;\r\n                this.loadPromise.resolve();\r\n            });\r\n    }\r\n\r\n}","import AdDisplayRequest from \"../AdDisplayRequest\"\r\nexport default class GPTRequest extends AdDisplayRequest\r\n{\r\n    onError()\r\n    {\r\n        console.log(\"Error  ed 2\");\r\n    }\r\n}","import AdService from \"../../Base/AdService\"\r\nimport * as Common from \"../../../../Common\"\r\nimport * as Network from \"../../../../Network\";\r\nimport SMCPromise from \"../../../../Arch/SMCPromise\"\r\nimport GPTRequest from \"./GPTRequest\";\r\n\r\n\r\n\r\n\r\nexport default class GPTService extends AdService {\r\n    onInitialized() {\r\n        /* Se carga la libreria js de google */\r\n        if (window.googletag === undefined)\r\n            window.googletag = {\r\n                cmd: []\r\n            };\r\n        this.loadPromise = SMCPromise();\r\n        this.loaded = false;\r\n        this.gt = googletag;\r\n        this.slotFromAd = {};\r\n        this.definedSlots = {};\r\n        this.adFromSlot = {};\r\n        if (this.config.autoload)\r\n            this.load();\r\n\r\n        this.events =\r\n            {\r\n                PAGE_LOAD_COMPLETE: 1,\r\n                SLOT_CREATE: 2,\r\n                SLOT_FETCH: 3,\r\n                SLOT_RECEIVING: 4,\r\n                SLOT_RENDERING: 5,\r\n                SLOT_RENDERED: 6,\r\n                GOOGLE_JS_LOADED: 8,\r\n                DEFINE_ATTRIBUTE: 9,\r\n                DEFINE_POSTATTRIBUTE: 10,\r\n                WARN_SLOT_ALREADY_ASSOCIATED: 12,\r\n                ERR_SIZE_ASSIGN: 13,\r\n                DEFINE_CATEGORY_EXCLUSION: 14,\r\n                REMOVE_CATEGORY_EXCLUSION: 16,\r\n                DEFINE_SEGMENT_ATTRIBUTE: 17,\r\n                REMOVE_SEGMENT_ATTRIBUTE: 19,\r\n                WARN_IGNORE_COLLAPSE: 20,\r\n                ERR_CANT_WRITE_SLOT: 21,\r\n                ERR_CANT_FIND_DIV: 22,\r\n                ERR_CANT_FIND_DIV_SLOT: 23,\r\n                ERR_UNKNOWN_DISPLAY_DIV: 26,\r\n                ERR_UNASSIGNED_DIV_DISPLAY: 27,\r\n                ERR_ALREADY_ASSIGNED_DIV: 28,\r\n                ERR_FUNCTION_EXCEPTION: 30,\r\n                QUEUE_FUNC_INVOKED: 31,\r\n                ERR_INVALID_SIZE_ASSIGMENT: 34,\r\n                SERVICE_CREATED: 35,\r\n                DEFINE_SERVICE_ATTRIBUTE: 36,\r\n                ERR_DEFINE_SERVICE_ATTRIBUTE: 37,\r\n                SERVICE_ALREADY_ENABLED: 38,\r\n                ERR_CANT_ENABLE_SERVICE: 39,\r\n                SERVICE_ADD_SLOT: 40,\r\n                ERR_INVALID_AD_SIZE: 41,\r\n                ERR_ROADBLOCK: 42,\r\n                ERR_SERVICE_NOT_ENABLED: 43,\r\n                ERR_CANT_CHECK_ROADBLOCK: 44,\r\n                ERR_CANT_FIND_SLOT: 45,\r\n                GPT_FETCH: 46,\r\n                ERR_GPT_FETCH: 47,\r\n                GPT_FETCHED: 48,\r\n                ERR_CANT_UPDATE: 49,\r\n                FILL_SLOT: 50,\r\n                ERR_SYNC_CALL_AFTER_LOAD: 52,\r\n                AD_RENDER_DELAYED: 53,\r\n                PASSBACK_DELAYED: 54,\r\n                AD_RENDER_AVOIDED: 55,\r\n                ERR_SLOT_NAME: 56,\r\n                WARN_UNKNOWN_PUBADS_ATTRIBUTE: 57,\r\n                WARN_UNKNOWN_SLOT_ATTRIBUTE: 58,\r\n                ERR_COOKIE_OPTIONS: 59,\r\n                WARN_SERVICE_ENABLED_1: 60,\r\n                WARN_SERVICE_ENABLED_2: 61,\r\n                WARN_SERVICE_ENABLED_3: 62,\r\n                SET_RENDER_MODE: 63,\r\n                DEFINE: 64,\r\n                ERR_NO_VALID_SLOT_FOUND: 65,\r\n                WARN_REFRESH_GPT_NOT_LOADED: 66,\r\n                WARN_NO_REFRESH_GPT_NOT_LOADED: 67,\r\n                WARN_SLOT_CLEAR_GPT_NOT_LOADED: 68,\r\n                UPDATE_QUEUED: 69,\r\n                UPDATING_ADS: 70,\r\n                CLEARING_ADS: 71,\r\n                REMOVING_NO_REFRESH: 72,\r\n                ERR_MUST_BE_MATRIX: 73,\r\n                ERR_MUST_BE_BOOLEAN: 74,\r\n                ERR_MUST_BE_NUMBER: 75,\r\n                ERR_MUST_BE_STRING: 76,\r\n                WARN_LOCATION_TRUNCATED: 77,\r\n                COLLAPSE_DIVS_ENABLED: 78,\r\n                WARN_COLLAPSE_DIVS_CONFIGURED: 79,\r\n                ERR_INVALID_SLOT_IN_POSITION: 80,\r\n                REMOVE_SEGMENT_ATTRIBUTE_2: 82,\r\n                WARN_CANT_FIND_SEGMENT_ATTRIBUTE: 84,\r\n                CATEGORY_EXCLUSION_DEFINED: 85,\r\n                CATEGORY_EXCLUSIONS_REMOVED: 87,\r\n                SERVICE_ATTRIBUTE_DEFINED: 88,\r\n                ERR_INVALID_TAG_TYPE: 90,\r\n                ERR_EXCEPTION_IN_EVENT_HANDLER: 92,\r\n                ERR_UNKNOWN_EVENT: 93,\r\n                ERR_UNKNOWN_SERVICE_FOR_SLOT: 94,\r\n                ERR_CORRELATOR: 95,\r\n                ERR_INVALID_ARGUMENTS: 96,\r\n                ERR_INVALID_CHILDSAFE_TYPE: 97,\r\n                ERR_OAS: 98,\r\n                SLOT_DESTROYED: 99,\r\n                ERR_INVALID_SAFEFRAME_ATTR: 100,\r\n                ERR_INVALID_SAFEFRAME_VALUE: 101,\r\n                WARN_CANT_FIND_SLOT_SEGMENT_ATTRIBUTE: 102,\r\n                SEGMENT_ATTRIBUTE_REMOVED: 103,\r\n                SEGMENT_ATTRIBUTES_CLEARED: 104,\r\n                SLOT_REFRESH_REQUESTED: 1000,\r\n                EVENT_SLOT_VIEWABLE: 1001,\r\n                EVENT_SLOT_VIEWABILITY_CHANGED: 1002,\r\n                EVENT_SLOT_RENDERED: 1003\r\n            };\r\n        this.eventsById = {};\r\n        for (var k in this.events)\r\n            this.eventsById[this.events[k]] = k;\r\n\r\n    }\r\n\r\n    onConfigured() {\r\n        this.gt.cmd.push(() => {\r\n            this.__log = googletag.debug_log.log;\r\n            let m = this;\r\n            googletag.debug_log.log = function (level, message, service, slot, reference) {\r\n                if (message && message.getMessageId && typeof (message.getMessageId()) === 'number') {\r\n                    m.onEvent(message.getMessageId(), slot, message);\r\n                }\r\n                return m.__log.apply(m.gt.debug_log, arguments);\r\n            };\r\n            let pads = this.gt.pubads();\r\n\r\n            pads.addEventListener('impressionViewable', function (event) {\r\n                m.onSlotViewable(event)\r\n            });\r\n            pads.addEventListener('slotRenderEnded', function (event) {\r\n                m.onSlotRenderEnded(event)\r\n            });\r\n            pads.addEventListener('slotVisibilityChanged', function (event) {\r\n                m.onSlotVisibilityChanged(event);\r\n            });\r\n            pads.addEventListener('slotOnload', function (event) {\r\n                m.onSlotOnload(event);\r\n            });\r\n\r\n            pads.collapseEmptyDivs();\r\n            this.gt.enableServices();\r\n        });\r\n\r\n    }\r\n\r\n    onReady() {\r\n    }\r\n\r\n    requestAd(ad) {\r\n        let r = this.createRequest(ad);\r\n        this.displayAd(ad);\r\n        return r;\r\n    }\r\n\r\n    displayAd(ad) {\r\n        this.gt.cmd.push(() => {\r\n            this.gt.display(ad.getContainer().getId());\r\n        });\r\n    }\r\n\r\n    configureAd(ad) {\r\n        this.load();\r\n        ad.before(\"Requesting\").wait(this.loadPromise);\r\n        this.gt.cmd.push(() => {\r\n            let adslot = ad.getServiceParam(\"GPT\", \"adunit\");\r\n            let sizes = ad.getSizes();\r\n            let gptSizes = ad.getServiceParam(\"GPT\", \"sizes\");\r\n            let targeting = ad.getTargeting();\r\n            sizes = sizes.concat(gptSizes || []);\r\n            let contId = ad.getContainer().getId();\r\n            let slot = null;\r\n            if (this.definedSlots[contId] === undefined) {\r\n                slot = this.gt.defineSlot(adslot, sizes, contId);\r\n                this.definedSlots[contId] = slot;\r\n            }\r\n            else {\r\n                this.definedSlots[contId] = slot;\r\n                slot.clearTargeting();\r\n            }\r\n\r\n            for (let k in targeting)\r\n                slot.setTargeting(k, targeting[k]);\r\n            slot.addService(this.gt.pubads());\r\n            this.slotFromAd[contId] = slot;\r\n            this.adFromSlot[contId] = ad;\r\n        });\r\n    }\r\n\r\n    load() {\r\n        if (this.loaded)\r\n            return;\r\n        var useSSL = 'https:' === document.location.protocol;\r\n        this.gt.cmd.push(() => this.resolve(\"gptPromise\"));\r\n        Network.asyncLoad((useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js')\r\n            .then(() => {\r\n                this.loaded = true;\r\n                this.loadPromise.resolve();\r\n            });\r\n    }\r\n\r\n\r\n    createRequest(ad) {\r\n        return new GPTRequest(this.serviceContainer,ad);\r\n    }\r\n\r\n    onSlotViewable(event) {\r\n        let ad = this.adFromSlot[event.slot.getElementId()];\r\n        if (ad === undefined)\r\n            return console.error(\"Unknown ad from slot \" + event.slot.getElementId());\r\n        if (ad.request != null)\r\n            ad.request.onViewable();\r\n    }\r\n\r\n    onSlotRenderEnded(event) {\r\n\r\n        let slot = event.slot;\r\n        let ad = this.adFromSlot[slot.getElementId()];\r\n        if (ad === undefined)\r\n            return console.error(\"Unknown ad from slot \" + event.slot.getElementId());\r\n        if (ad.request == null)\r\n            return;\r\n        let req = ad.request;\r\n        var m1 = event.slot.getResponseInformation();\r\n        if (!m1)\r\n            req.onEmpty();\r\n        else {\r\n            if (!m1.advertiserId || !m1.creativeId) {\r\n                req.onEmpty();\r\n            }\r\n            else {\r\n                let szc = event.size.constructor.toString();\r\n                let receivedSize = null;\r\n                let isOutOfPage = slot.getOutOfPage();\r\n                if (!isOutOfPage) {\r\n                    if (szc.indexOf(\"tring\") > 0)\r\n                        receivedSize = message.size;\r\n                    else {\r\n                        if (szc.indexOf(\"rray\"))\r\n                            receivedSize = message.size[0] + \"x\" + message.size[1];\r\n                    }\r\n                }\r\n                else\r\n                    receivedSize = \"0x0\";\r\n\r\n                req.addProperty(\"isBackfill\", m1.isBackfill);\r\n                req.addProperty(\"serviceName\", m1.serviceName);\r\n                req.addProperty(\"isOutOfPage\", slot.getOutOfPage());\r\n                req.addProperty(\"isFirstLook\", slot.getFirstLook() == 0 ? false : true);\r\n\r\n                req.onAdReceived(\r\n                    m1.advertiserId,\r\n                    m1.campaignId,\r\n                    m1.creativeId,\r\n                    m1.lineItemId,\r\n                    receivedSize);\r\n            }\r\n        }\r\n        req.onDisplayEnded();\r\n    }\r\n\r\n    onSlotVisibilityChanged(event) {\r\n        let slot = event.slot;\r\n        let ad = this.adFromSlot[slot.getElementId()];\r\n        if (ad === undefined)\r\n            return console.error(\"Unknown ad from slot \" + event.slot.getElementId());\r\n        if (ad.request == null)\r\n            return;\r\n        ad.request.onSlotVisibilityChange(event.inViewPercentage);\r\n    }\r\n\r\n    onSlotOnload(event) {\r\n        let slot = event.slot;\r\n        let ad = this.adFromSlot[slot.getElementId()];\r\n        if (ad === undefined)\r\n            return console.error(\"Unknown ad from slot \" + event.slot.getElementId());\r\n        if (ad.request == null)\r\n            return;\r\n        req.onImpression();\r\n\r\n    }\r\n\r\n    onEvent(id, slot, message) {\r\n        if (this.eventsById[id] === undefined) {\r\n            console.log(\"EVENTO DESCONOCIDO:\" + id);\r\n            return;\r\n        }\r\n        console.log(\"--->EVENT:\"+this.eventsById[id]);\r\n        let adId = slot ? slot.getSlotElementId() : null;\r\n        let ad=null;\r\n        if(adId)\r\n            ad=this.adFromSlot[adId];\r\n        let req = ad ? ad.request : null;\r\n        switch (this.eventsById[id]) {\r\n            case \"SLOT_CREATE\": {\r\n            }\r\n                break;\r\n            case \"SLOT_FETCH\": {\r\n                req.onRequested();\r\n            }\r\n                break;\r\n            case \"SLOT_RECEIVING\": {\r\n                req.onLoaded();\r\n\r\n            }\r\n                break;\r\n            case \"SLOT_RENDERING\": {\r\n                req.onDisplayStart();\r\n                //ad.setDisplaying();\r\n            }\r\n                break;\r\n            case \"SLOT_RENDERED\": {\r\n                // Tratado en onSlotRenderEnded\r\n                //ad.setDisplayed();\r\n\r\n            }\r\n                break;\r\n            case \"GOOGLE_JS_LOADED\": {\r\n\r\n            }\r\n                break;\r\n            default: {\r\n                if (this.eventsById[id].substr(0, 4) === \"ERR_\") {\r\n                    if (slot !== undefined) {\r\n                        req.onError(message);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getTagName() {\r\n        return \"DFP\";\r\n    }\r\n}\r\n\r\n","import AdService from \"../../Base/AdService\";\r\nimport * as Network from \"../../../../Network\"\r\n\r\nexport default class Ava extends AdService\r\n{\r\n    onInitialized(){\r\n\r\n    }\r\n    onConfigured(){\r\n    }\r\n    onReady(){}\r\n\r\n    onEvent(id,slot,message) {\r\n    }\r\n    requestAd(ad)\r\n    {\r\n\r\n    }\r\n    configureAd(ad)\r\n    {\r\n        top.Site_conf=ad.getServiceParam(\"Ava\");\r\n        ad.before(\"Requesting\").wait(\r\n            Network.asyncLoad(\"https://cdn.smartclip-services.com/v1/Storage-a482323/smartclip-services/ava/ava.js\")\r\n        );\r\n    }\r\n\r\n}\r\n/*\r\nSmartAva = {\r\n    config: {\r\n        siteConfPath: \"https://cdn.smartclip-services.com/v1/Storage-a482323/smartclip-services/ava/config/\",\r\n        smartclipConfig: \"https://cdn.smartclip-services.com/v1/Storage-a482323/smartclip-services/HeaderBidding/js/SmartclipConfig.js\",\r\n        js_dependencies: [\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\"],\r\n        pixels: [\r\n            {\r\n                \"name\": \"generic1\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent1.gif?player_id=\",\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic2\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent2.gif?player_id=\",\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic3\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent3.gif?player_id=\",\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic4\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent4.gif?player_id=\",\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic5\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent5.gif?player_id=\",\r\n                \"event\": [\"noAd\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic6\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent6.gif?player_id=\",\r\n                \"event\": [\"noAd\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic7\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent7.gif?player_id=\",\r\n                \"event\": [\"complete\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"generic8\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Transparent8.gif?player_id=\",\r\n                \"event\": [\"complete\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericBR1\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentBR1.gif?player_id=\",\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericBR2\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentBR2.gif?player_id=\",\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericBR3\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentBR3.gif?player_id=\",\r\n                \"event\": [\"noAd\"],\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericLATAM1\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentMX1.gif?player_id=\",\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericLATAM2\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentMX2.gif?player_id=\",\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"genericLATAM3\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/TransparentMX3.gif?player_id=\",\r\n                \"event\": [\"noAd\"],\r\n                \"country\": [\"br\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"bluekai\",\r\n                \"url\": \"//tags.bluekai.com/site/47890?ret=js&limit=1&phint=sc_videosite%3D\",\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"comscoreImpression\",\r\n                \"url\": \"//smx-stats.smartclipconfig.com/Csi.gif?guid=\"+ getGuid()+ \"&playerId=\",\r\n                \"event\": [\"noAd\"],\r\n                \"needPlayerId\": true\r\n            },\r\n            {\r\n                \"name\": \"sc_DV360\",\r\n                \"url\": \"//ad.sxp.smartclip.net/sync?type=red&dsp=10\",\r\n                \"event\": [\"noAd\"],\r\n                \"country\": [\"ar\", \"br\", \"co\", \"ec\", \"mx\", \"pe\", \"us\"],\r\n                \"frequency\": [1, 720]\r\n            },\r\n            {\r\n                \"name\": \"sc_MediaMath\",\r\n                \"url\": \"//ad.sxp.smartclip.net/sync?type=red&dsp=40\",\r\n                \"event\": [\"noAd\"],\r\n                \"country\": [\"ar\", \"br\", \"co\", \"ec\", \"mx\", \"pe\", \"us\"],\r\n                \"frequency\": [1, 720]\r\n            },\r\n            {\r\n                \"name\": \"uniqueUserApnx\",\r\n                \"url\": \"https://secure.adnxs.com/seg?add=14832416&t=2\",\r\n                \"country\" : [\"es\"]\r\n            }\r\n        ]\r\n    },\r\n    utils: {\r\n        ava_sc_smartIntxtStart: function(container) {\r\n\r\n            SmartAva.utils.showElement(container);\r\n            if (Ava_conf.hardSkip && Ava_conf.hardSkip != 0) {\r\n                SmartAva.utils.addSkipButton(Ava_conf.hardSkip, container,SmartAva.utils.ava_sc_smartIntxtEnd)\r\n            }\r\n        },\r\n\r\n        ava_sc_smartIntxtEnd: function() {\r\n\r\n            if (Ava_conf.nonstop) {\r\n                if (typeof top.sc_intext_cont == \"undefined\") {\r\n                    top.sc_intext_cont = 0;\r\n                }\r\n                var reference = \"smartIntxt\" + top.sc_intext_cont;\r\n                SmartAva.utils.removeFixedClasses(Ava_conf.fixedClass);\r\n                top.sc_intext_cont++;\r\n                var ref_element = '<div id=\"' + reference + '\" class = \"' + Ava_conf.fixedClass + '\" ></div>';\r\n                top.avaContainerElement.insertAdjacentHTML('beforebegin', ref_element);\r\n                SmartAva.init(VideoManager.ava.getElementIdCrossFrames(reference), Ava_conf);\r\n            }else{\r\n                SmartAva.utils.hideElement(SmartIntxt.config.elementContainer);\r\n            }\r\n\r\n        },\r\n        intxt_sc_smartIntxtStart : function(container){\r\n            try {\r\n                sc_smartIntxtStart();\r\n            } catch(e) {\r\n                console.log(e);\r\n            }\r\n            if (!container.id) container = VideoManager.ava.getElementIdCrossFrames(container);\r\n            var intxtConf = top.Site_conf.intxt[SmartAva.utils.isMobile() ? \"mobile\" : \"web\"];\r\n            if (typeof(intxtConf) != \"undefined\" && intxtConf.hardSkip != 0) {\r\n                SmartAva.utils.addSkipButton(intxtConf.hardSkip, container,function (){SmartAva.utils.intxt_sc_smartIntxtEnd(container)})\r\n            }\r\n        },\r\n\r\n        intxt_sc_smartIntxtEnd: function(container){\r\n            try {\r\n                sc_smartIntxtEnd()\r\n            } catch(e) {\r\n                console.log(e);\r\n            }\r\n            if (!container.id) container = VideoManager.ava.getElementIdCrossFrames(container);\r\n            var intxtConf = top.Site_conf.intxt[SmartAva.utils.isMobile() ? \"mobile\" : \"web\"];\r\n            if (typeof(intxtConf) != \"undefined\" && intxtConf.nonstop) {\r\n                if (typeof top.sc_intext_cont == \"undefined\") {\r\n                    top.sc_intext_cont = 0;\r\n                }\r\n                var reference = container.id + top.sc_intext_cont;\r\n                top.sc_intext_cont++;\r\n                var ref_element = '<div id=\"' + reference + '\" ></div>';\r\n                container.insertAdjacentHTML('beforebegin', ref_element);\r\n                SmartAva.utils.startSmartIntext(reference,\"intxt\")\r\n            }\r\n\r\n        },\r\n        hideElement: function (target){ //TEST if is still needed\r\n            var element;\r\n            VideoManager.ava.getElementIdCrossFrames(target.id) ? element = VideoManager.ava.getElementIdCrossFrames(target.id) : element = VideoManager.ava.getElementIdCrossFrames(SmartIntxt.config.elementContainer);\r\n            element.style.display = 'none';\r\n        },\r\n        showElement: function (target){ //searches element by id and html node\r\n\r\n            var element;\r\n            target.id ? element = VideoManager.ava.getElementIdCrossFrames(target.id) : element = VideoManager.ava.getElementIdCrossFrames(target);\r\n            element.style.opacity = \"1\";\r\n            element.style.display = 'block'\r\n        },\r\n\r\n        getPlayerConfig : function (format){\r\n            var response = {};\r\n            var Ava_conf = VideoManager.ava.loadAvaConfDevice();\r\n            var Inphoto_conf = top.Site_conf.inphoto[SmartAva.utils.isMobile() ? \"mobile\" : \"web\"];\r\n            var intxt_conf = this.getIntxtConfig();\r\n\r\n\r\n            switch (format) {\r\n                case \"ava\":\r\n                    response.playerId = Ava_conf.smaracd_player;\r\n                    Ava_conf.placement ? response.plc = Ava_conf.placement : response.plc =\"\";\r\n                    response.skipOffset = Ava_conf.skipOffset;\r\n                    response.skipText = Ava_conf.skipText;\r\n                    break;\r\n            }\r\n            return response\r\n        },\r\n        removeFixedClasses: function(patern) {\r\n            var elements = top.document.getElementsByClassName(patern);\r\n            for (i = 0; i < elements.length; i++) {\r\n                var element = elements[i];\r\n                element.classList.remove(patern);\r\n                element.style.display = \"none\";\r\n            }\r\n        },\r\n        createPositionReference: function(target) {\r\n\r\n            if (typeof intext_element == \"undefined\") {\r\n                if (!document.getElementById(target)) {\r\n                    intext_element = top.document.getElementById(target);\r\n                    setTimeout(function() {\r\n                        SmartAva.utils.createPositionReference(target);\r\n                    }, 100); //BLOCKED, smartIntxt element is not being created :-O\r\n                } else {\r\n                    intext_element = document.getElementById(target);\r\n                }\r\n            }\r\n            var elementName = \"sc-ava-\" + Math.round(Math.random() * 1e8);\r\n            var ref_element = '<div id=\"' + elementName + '\"></div>';\r\n            intext_element.insertAdjacentHTML('beforebegin', ref_element);\r\n            return elementName;\r\n        },\r\n\r\n        resizeIntextIframe: function() {\r\n            var iframe = document.getElementById(SmartIntxt.config.elementContainer + \"-frame\");\r\n            if (!iframe) {\r\n                iframe = top.document.getElementById(SmartIntxt.config.elementContainer + \"-frame\");\r\n            }\r\n            if (iframe) {\r\n                var innerDoc = iframe.contentDocument || iframe.contentWindow.document;\r\n                var vpaid_container = innerDoc.querySelectorAll(\"div[id*=vpaidSlot]\");\r\n                var videos = innerDoc.getElementsByTagName(\"video\");\r\n                var styles = {\r\n                    height: \"100%\",\r\n                    width: \"100%\"\r\n                };\r\n                if (vpaid_container && iframe) {\r\n                    for (var i = 0; i < vpaid_container.length; i++) {\r\n                        top.smartclipJquery(vpaid_container[i]).css(styles);\r\n                        for (b = 0; vpaid_container[i].children.length > b; b++) {\r\n                            top.smartclipJquery(vpaid_container[i].children[b]).css(styles);\r\n                            for (var a = 0; a < vpaid_container[i].children[b].children.length; a++) {\r\n                                top.smartclipJquery(vpaid_container[i].children[b].children[a]).css(styles);\r\n                            }\r\n                        }\r\n                    }\r\n                    var iframes = innerDoc.getElementsByTagName(\"iframe\");\r\n                    for (var i = 0; i < iframes.length; i++) {\r\n                        top.smartclipJquery(iframes[i]).css(styles);\r\n                    }\r\n\r\n                }\r\n            }\r\n        },\r\n        managePlayerPosition: function(containerReferencePosition, container, movePlayerTimes, alwaysVisible, Ava_conf, containerElementIsFormatted) {\r\n            var result = {\r\n                movePlayerTimes: movePlayerTimes,\r\n                inView: null\r\n            }\r\n            if (movePlayerTimes < Ava_conf.movePlayerCap || Ava_conf.movePlayerCap == 0) {\r\n                var refTop = top.smartclipJquery(\"#\" + containerReferencePosition).offset().top; //Pixels from elements top to top of document\r\n                var refBot = refTop + top.smartclipJquery(\"#\" + containerReferencePosition).width() / 16 * 9; //Pixels from elements bottom to top of document\r\n                SmartAva.utils.resizeIntextIframe();\r\n\r\n                if (SmartAva.utils.isInview(refTop, refBot, Ava_conf.margin_bot, Ava_conf.margin_top)) {\r\n                    result.inView = true;\r\n                    if (alwaysVisible) {\r\n                        //if(this.isFixed())\r\n                        if (typeof container.classList != 'undefined' && container.classList.value == Ava_conf.fixedClass) { //TODO  poner nombres coherentes a esto\r\n\r\n                            container.classList.remove(Ava_conf.fixedClass);\r\n                            result.movePlayerTimes++;\r\n                        }\r\n\r\n                    } else {\r\n                        //When initiated not fixed...\r\n\r\n                        SmartAva.utils.startCallback(container);\r\n                    }\r\n                } else {\r\n                    result.inView = false;\r\n                    if (typeof container.classList == 'undefined' || container.classList == \"\" && alwaysVisible) {\r\n                        SmartAva.utils.addClassToElement(Ava_conf.fixedClass, container, containerElementIsFormatted);\r\n                        result.movePlayerTimes++;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n    init: function(container, Ava_conf) {\r\n        var containerElementIsFormatted = false;\r\n        if (typeof top.jQuery != \"undefined\") {\r\n            top.smartclipJquery = top.jQuery;\r\n            var containerPositionReference = SmartAva.utils.createPositionReference(container.id);\r\n            if (Ava_conf.initFixed && !Ava_conf.onscroll) {\r\n                SmartAva.utils.addClassToElement(Ava_conf.fixedClass, container, containerElementIsFormatted);\r\n                containerElementIsFormatted = true;\r\n            }\r\n            var movePlayerTimes = 0;\r\n            if (Ava_conf.initFixed) {\r\n                if (!Ava_conf.keepFixed) {\r\n\r\n                    top.smartclipJquery(top.window).scroll(function() { // Warning pending remove listener on end.\r\n\r\n                        if (!containerElementIsFormatted) {\r\n                            SmartAva.utils.addClassToElement(Ava_conf.fixedClass, container, containerElementIsFormatted);\r\n                            containerElementIsFormatted = true;\r\n\r\n                        }\r\n                        var ManageResult = SmartAva.utils.managePlayerPosition(containerPositionReference, container, movePlayerTimes, true, Ava_conf, containerElementIsFormatted); //pass AVA element\r\n                        containerElementIsFormatted = true\r\n                        movePlayerTimes = ManageResult.movePlayerTimes;\r\n\r\n                    });\r\n                } else {\r\n                    SmartAva.utils.addClassToElement(Ava_conf.fixedClass, container, containerElementIsFormatted);\r\n\r\n                }\r\n            } else {\r\n                var alwaysVisible = false\r\n                top.smartclipJquery(top.window).scroll(function() { // Warning pending remove listener on end.\r\n                    var ManageResult = SmartAva.utils.managePlayerPosition(containerPositionReference, container, movePlayerTimes, alwaysVisible, Ava_conf, containerElementIsFormatted); //pass AVA element\r\n                    if (ManageResult.inView) {\r\n                        alwaysVisible = true;\r\n                        containerElementIsFormatted = true\r\n                    }\r\n\r\n                    movePlayerTimes = ManageResult.movePlayerTimes;\r\n                });\r\n\r\n            }\r\n\r\n\r\n        } else {\r\n            if (typeof jQuery == \"undefined\") {\r\n                SmartAva.utils.loadJsResources(SmartAva.config.js_dependencies); //LOAD JQUERY ONNLY\r\n                setTimeout(function() {\r\n                    SmartAva.init(container, Ava_conf);\r\n                }, 200);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n\r\nVideoManager = {\r\n    ava: {\r\n\r\n        createAvaContainerAndStart: function(Ava_conf) {\r\n            if (SmartIntxt.config.elementContainer == \"\") {\r\n                var elementContainer = VideoManager.ava.getContainerElement();\r\n                if (typeof elementContainer != \"undefined\") { //Create an element on Document where element locator did.... Then we use it as AVA container\r\n                    elementContainer.innerHTML = \"\";\r\n                    elementContainer.style = \"\";\r\n                    var mandanga = '<div id=\"sc_smartAva\"></div>';\r\n                    elementContainer.insertAdjacentHTML(\"beforebegin\", mandanga);\r\n                    SmartIntxt.config.elementContainer = \"sc_smartAva\";\r\n\r\n                    elementContainer = VideoManager.ava.getElementIdCrossFrames(\"sc_smartAva\");\r\n\r\n                    delete SmartPlay;\r\n\r\n                } else {\r\n                    setTimeout(function() {\r\n                        VideoManager.ava.createAvaContainerAndStart(Ava_conf);\r\n                    }, 200);\r\n                }\r\n            } else {\r\n                elementContainer = VideoManager.ava.getElementIdCrossFrames(SmartIntxt.config.elementContainer);\r\n\r\n                //TODO Test pretty well elementcontainer name is returned\r\n\r\n            }\r\n            if (typeof elementContainer != \"undefined\") {\r\n                VideoManager.ava.ready(elementContainer, Ava_conf);\r\n            } else {\r\n\r\n            }\r\n\r\n        },\r\n        getContainerElement: function() {\r\n\r\n            var a = VideoManager.ava.getElementsCrossFrames(\"div[id*=sc-]\");\r\n            var result;\r\n\r\n            a.forEach(function(a) {\r\n                if (a.id.indexOf(\"-backdrop\") >= 0) {\r\n                    result = a.parentElement;\r\n\r\n                }\r\n            });\r\n            return result;\r\n        },\r\n\r\n        prepareDocumentForAva: function(Ava_conf) {\r\n            VideoManager.ava.loadCssResources(Ava_conf);\r\n            if (SmartIntxt.config.elementContainer == \"\") {\r\n                SmartIntxt.init(); //Init intext so elements are included on page\r\n            }\r\n        },\r\n\r\n        init: function() {\r\n            top.SmartAva = SmartAva; // creating global object for external connections\r\n            if (typeof avaConfRequested == 'undefined' || typeof top.Site_conf == 'undefined') { //conf is loadeed?\r\n                VideoManager.ava.loadAvaConf();\r\n                setTimeout(function() {\r\n                    VideoManager.ava.init()\r\n                }, 200);\r\n\r\n            } else {\r\n\r\n                var Ava_conf = VideoManager.ava.loadAvaConfDevice();\r\n                Site_conf = top.Site_conf;\r\n                VideoManager.ava.executeIntxtContainerPositioning();\r\n                if (VideoManager.ava.discardAva(Ava_conf)) { //no Ava, regular\r\n                    Site_conf = top.Site_conf;\r\n                    //SmartIntxt.init();\r\n\r\n                    SmartAva.utils.startSmartIntext(SmartIntxt.config.elementContainer,\"intxt\")\r\n                    traditionalIntext = true;\r\n\r\n\r\n                } else {\r\n                    traditionalIntext = false\r\n                    VideoManager.ava.prepareDocumentForAva(Ava_conf);\r\n                    VideoManager.ava.createAvaContainerAndStart(Ava_conf);\r\n\r\n                }\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\n\r\nVideoManager.ava.init();\r\nVideoManager.inphoto.init();\r\n\r\n */","import AdService from \"../../Base/AdService\";\r\nimport * as Network from \"../../../../Network\";\r\nimport SMCPromise from \"../../../../Arch/SMCPromise\";\r\n\r\nexport default class Ava extends AdService\r\n{\r\n    onInitialized(){\r\n        this.loaded=false;\r\n        this.loadPromise=SMCPromise();\r\n\r\n    }\r\n    onConfigured(){\r\n    }\r\n    onReady(){}\r\n\r\n    onEvent(id,slot,message) {\r\n    }\r\n    requestAd(ad)\r\n    {\r\n        let plc=ad.getServiceParam(\"Intext\",\"plc\");\r\n        let contId=ad.getContainer().getId();\r\n        ad.before(\"Displaying\").wait(this.loadPromise);\r\n        Network.asyncLoad(\"https://des.smartclip.net/ads?type=dyn&sz=400x320&rnd=94632936&plc=\"+plc+\"&elementId=\"+contId).then(()=>{\r\n            this.loadPromise.resolve();\r\n        });\r\n    }\r\n    displayAd(ad)\r\n    {\r\n\r\n\r\n    }\r\n    configureAd(ad)\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\n","import AdBehaviour from '../Base/AdBehaviour';\r\n\r\nexport default class Scheduled extends AdBehaviour\r\n{\r\n    initialize()\r\n    {\r\n        let scheduler=this.serviceContainer.get(\"Scheduler\");\r\n        this.ad.before(\"Requesting\").wait(scheduler.schedule(this.config));\r\n    }\r\n}\r\n\r\n","import Promised from '../../Arch/Promised'\r\nimport Ad from '../Ad/Base/Ad'\r\nimport * as Common from \"../../Common\";\r\n\r\nexport default class AdController extends Promised\r\n{\r\n    constructor(serviceContainer,slotid,node,adConfig)\r\n    {\r\n        super();\r\n        this.slotId=slotid;\r\n        this.config=adConfig;\r\n        this.domNode=node;\r\n        this.serviceContainer=serviceContainer;\r\n        this.mergeTags();\r\n    }\r\n    initialize()\r\n    {\r\n        this.slotConfig.container.value.node=this.domNode;\r\n        this.container=this.serviceContainer.get(\"Container\").getContainer(this.slotConfig.container);\r\n        this.ad=new Ad(this.serviceContainer,this.slotId,this.slotConfig,this.config);\r\n        this.run([\"Initialize\",\"Run\"])\r\n    }\r\n    onInitialize()\r\n    {\r\n        this.container.attachTo(this.domNode);\r\n        this.container.initialize();\r\n        this.ad.initialize();\r\n        this.ad.attach(this.container);\r\n        this.container.setAd(this.ad);\r\n\r\n\r\n    }\r\n    onRun()\r\n    {\r\n\r\n\r\n    }\r\n    mergeTags()\r\n    {\r\n\r\n        this.slotConfig = Common.deepmerge({},this.config.slots[this.slotId]);\r\n        if(this.config.slots[this.slotId].tags==undefined) {\r\n            return;\r\n        }\r\n        this.slotConfig.tags.map((tag)=>{\r\n            if(this.config.tags[tag]!==undefined) {\r\n                this.slotConfig = Common.deepmerge(this.slotConfig,this.config.tags[tag]);\r\n            }\r\n        })\r\n        if(this.config.globalSlot!==undefined)\r\n        {\r\n            this.slotConfig=Common.deepmerge(this.slotConfig,this.cofig.globalSlot);\r\n        }\r\n    }\r\n}\r\n","import Promised from '../../Arch/Promised';\r\nimport DivNode from './lib/DivNode';\r\nimport SMCPromise from '../../Arch/SMCPromise';\r\n\r\n\r\nexport default class BaseContainer extends Promised{\r\n    constructor(ContainerService,config)\r\n    {\r\n        super();\r\n        this.divNode=null;\r\n        this.config=config;\r\n    }\r\n    initialize()\r\n    {\r\n        this.prependPromises({\"gotAd\":\"Ready\",\"attached\":\"Configured\",\"destroy\":\"Destroyed\"});\r\n        this.run([\"Created\",\"Attached\",\"Configured\",\"Ready\",\"Destroyed\"]);\r\n    }\r\n    onCreated()\r\n    {\r\n\r\n    }\r\n    onAttached()\r\n    {\r\n        this.divNode=new DivNode(this.config);\r\n    }\r\n    onConfigured()\r\n    {\r\n        if(this.divNode &&typeof this.config.style!==undefined)\r\n            this.divNode.applyStyles(this.config.style);\r\n\r\n\r\n    }\r\n    onReady()\r\n    {\r\n\r\n    }\r\n    onDestroyed()\r\n    {\r\n\r\n    }\r\n    attachTo(node)\r\n    {\r\n        this.divNode=node;\r\n        this.resolve(\"attached\");\r\n    }\r\n    getId()\r\n    {\r\n        return this.divNode.getId();\r\n    }\r\n    getNode(){return this.divNode;}\r\n    destroy()\r\n    {\r\n        this.resolve(\"destroy\");\r\n    }\r\n    setAd(ad)\r\n    {\r\n        this.ad=ad;\r\n        this.resolve(\"gotAd\");\r\n    }\r\n}\r\n","import Service from '../../Service/Service';\r\nexport default class ContainerService extends Service {\r\n    onConfigured()\r\n    {\r\n        this.registeredContainers=this.config.containers;\r\n    }\r\n    onReady()\r\n    {\r\n\r\n    }\r\n    registerContainer(type,module)\r\n    {\r\n        this.registeredContainers[type]=module;\r\n    }\r\n    getContainer(config)\r\n    {\r\n        let containerType=config.type;\r\n        if(typeof this.registeredContainers[containerType]===undefined)\r\n            throw \"Unknown Container type:\"+containerType;\r\n        return new this.registeredContainers[containerType](this,config.value);\r\n    }\r\n\r\n}","import * as Compat from \"../../../Browser/CrossCompat\"\r\nconst positionalProperties=[\"position\",\"top\",\"left\",\"width\",\"height\",\"display\",\"float\"];\r\nexport default class DivNode\r\n{\r\n    constructor(nodeSpec)\r\n    {\r\n        this.node=null;\r\n        this.properties={};\r\n        if(nodeSpec.node !== undefined)\r\n            this.node=nodeSpec.node;\r\n        if(nodeSpec.id !== undefined)\r\n            this.node=document.getElementById(nodeSpec.id);\r\n        if(nodeSpec.query!==undefined) {\r\n            var list= [].slice.call(document.querySelectorAll(nodeSpec.query));\r\n            this.node=list.length>0?list[0]:null;\r\n        }\r\n        if(nodeSpec.tag!==undefined)\r\n        {\r\n            this.node=document.createElement(nodeSpec.tag);\r\n            if(nodeSpec.parent!==null)\r\n                this.nodeSpec.parent.appendChild(this.node);\r\n        }\r\n    }\r\n    addChild(node)\r\n    {\r\n        if(this.node==null)return;\r\n    }\r\n    applyStyles(styles)\r\n    {\r\n        if(this.node==null) return;\r\n        for (var k in styles)\r\n            this.node.style[k] = styles[k];\r\n    }\r\n    getStyles(styles)\r\n    {\r\n        var res={};\r\n        styles.map((i)=>res[i]=this.node.style[i]);\r\n        return res;\r\n    }\r\n    getPositionalProperties()\r\n    {\r\n        return this.getStyles(positionalProperties);\r\n    }\r\n    getNode()\r\n    {\r\n        return this.node;\r\n    }\r\n    getId()\r\n    {\r\n        return this.node.id;\r\n    }\r\n    addProperty(key, value)\r\n    {\r\n        this.properties[key]=value;\r\n    }\r\n    removeProperty(key)\r\n    {\r\n        delete this.properties[key];\r\n    }\r\n    getProperty(key)\r\n    {\r\n        return this.properties[key] || null;\r\n    }\r\n    addClass(className)\r\n    {\r\n        // classList no es soportado en versiones anteriores a 10..\r\n        var curClasses=this.node.className.split(\" \").filter(function(f){return f!==className});\r\n        curClasses.push(className);\r\n        this.node.className=curClasses.join(\" \");\r\n    }\r\n    removeClass(className)\r\n    {\r\n        this.node.className=this.node.className.split(\" \").filter(function(f){return f!==className}).join(\" \");\r\n    }\r\n}","\r\nimport * as Browser from \"../../Browser/Browser\";\r\nimport * as Cookie from \"../../Browser/Cookie\";\r\nimport ConditionalConfig from \"../../Config/ConditionalConfig\"\r\nimport Evented from \"../../Arch/Evented\"\r\nimport AdController from \"../AdController/AdController\";\r\n\r\nexport default class PageManager extends Evented\r\n{\r\n    constructor(serviceContainer,config)\r\n    {\r\n        super();\r\n        this.serviceContainer=serviceContainer;\r\n        this.rawConfig=config;\r\n        this.adControllers={};\r\n        this.divCounter=0;\r\n        this.divPrefix=\"SM-\"+(new Date().getTime())+\"-\";\r\n        this.behaviours={};\r\n    }\r\n    initialize()\r\n    {\r\n        let ps=this.serviceContainer.get(\"PageStats\");\r\n        var stats=ps.getStats();\r\n        let confParser=new ConditionalConfig(this.rawConfig,\r\n            {\r\n                browser:Browser.browserInfo(),\r\n                page:stats,\r\n                getCookie:Cookie.getCookie}\r\n                );\r\n        this.config=confParser.parse();\r\n\r\n        if(this.config.behaviours!==undefined)\r\n        {\r\n            for(let k in this.config.behaviours)\r\n            {\r\n                let i=this.config.behaviours[k];\r\n                let newI=new i.type(this.serviceContainer,this,i.config);\r\n                newI.initialize();\r\n                this.behaviours[k]=newI;\r\n            }\r\n        }\r\n\r\n        if(SmartJs!==undefined)\r\n        {\r\n            let slots=SmartJs.slots;\r\n            if(slots!==undefined)\r\n                slots.map((c)=>this.register(c.s,c.n));\r\n            let cmd=top.SmartJs.cmd;\r\n            top.SmartJs=this;\r\n            cmd.map((c)=>c.apply(this));\r\n            this.cmd={push:(c)=>c.apply(this)}\r\n        }\r\n    }\r\n    register(position,node)\r\n    {\r\n        if(this.config.slots[position]===undefined)\r\n            return;\r\n        if(this.config.slots[position].enabled===false)\r\n            return;\r\n        // Se obtiene una referencia al ultimo js ejecutado en la pagina\r\n        let divNode=node;\r\n        if(divNode===undefined) {\r\n            let domNodes = document.getElementsByTagName(\"script\");\r\n            let scriptNode = domNodes[domNodes.length] - 1;\r\n            divNode = scriptNode.parentNode();\r\n        }\r\n        var subDivNode=document.createElement(\"div\");\r\n\r\n        subDivNode.id=this.divPrefix+this.divCounter;\r\n        divNode.appendChild(subDivNode);\r\n        this.divCounter++;\r\n\r\n        this.adControllers[subDivNode.id]=new AdController(\r\n            this.serviceContainer,position,subDivNode,this.config\r\n        );\r\n        // Fire event.\r\n        this.adControllers[subDivNode.id].initialize();\r\n    }\r\n}","import * as Compat from '../../../Browser/CrossCompat';\r\nimport ServiceContainer from '../../../Service/ServiceContainer';\r\n// Las siguientes lineas deberian ser generadas\r\nimport ContainerService from '../../Container/ContainerService';\r\nimport BaseContainer from '../../Container/BaseContainer.js';\r\nimport Scheduler from '../../../Browser/Scheduler';\r\nimport GPTService from \"../../Ad/Display/GPT/GPTService\";\r\nimport AppNexusService from \"../../Ad/Display/AppNexus/AppNexusService\";\r\nimport ConsoleLogger from \"../../../Log/ConsoleLogger\";\r\nimport Ava from \"../../Ad/Video/OutStream/Ava\"\r\nimport Scheduled from \"../../Ad/behaviours/Scheduled\";\r\nimport Intext from \"../../Ad/Video/OutStream/Intext\";\r\nimport PageManager from \"../PageManager\";\r\nimport PageStats from \"../../../Browser/PageStats\"\r\n\r\n/* Comportamientos de containers */\r\n//import ExpandOnScroll from '../behaviours/ExpandOnScroll';\r\n\r\nlet sContainer=new ServiceContainer(null);\r\nsContainer.loadServices({\r\n    \"Scheduler\":{\r\n        instance:Scheduler\r\n    },\r\n    \"Container\":{\r\n        instance:ContainerService,\r\n        config:{\r\n            containers:{\r\n                \"Simple\":BaseContainer\r\n            },\r\n            behaviours:{\r\n                //\"ExpandOnScroll\":ExpandOnScroll\r\n            }\r\n        }\r\n    },\r\n    \"PageStats\":{\r\n        instance:PageStats,\r\n        config:{}\r\n    },\r\n    \"Log\":{\r\n        instance:ConsoleLogger,\r\n        config:{}\r\n    },\r\n    \"GPT\":{\r\n        instance:GPTService,\r\n        config:{}\r\n    },\r\n    \"Intext\":{\r\n        instance:Intext,\r\n        config:{}\r\n    },\r\n    \"Ava\":{\r\n        instance:Ava,\r\n        config:{}\r\n    },\r\n    \"AppNexus\":{\r\n        instance:AppNexusService,\r\n        config:{\r\n            member: 1024\r\n        }\r\n    }\r\n});\r\n\r\nlet sampleAdConfig={\r\n    tags:{\r\n        \"simpleContainer\":{\r\n            container: {\r\n\r\n                \"type\": \"Simple\",\r\n                \"value\": {\r\n                    \"style\": {\r\n                        \"border\": \"1px solid black\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"roba\": {\r\n            ad: {\r\n                sizes: [[300, 250]]\r\n            }\r\n        },\r\n\r\n        \"delayed\":{\r\n            \"ad\":{\r\n                behaviours:{\r\n                    \"Scheduled\":{type:Scheduled,config:{when:\"LOAD\",timeout:3000}}\r\n                }\r\n            }\r\n        },\r\n        \"banner\":{\r\n            \"ad\":{\r\n                sizes:[980,200]\r\n            }\r\n        },\r\n        \"intext\":{\r\n\r\n            \"ad\":{\r\n                adProvider: \"Intext\",\r\n                \"Intext\": {\r\n                    plc: \"68005\"\r\n                }\r\n            }\r\n        },\r\n        \"gpt\": {\r\n            \"ad\":{adProvider:\"GPT\"}\r\n        },\r\n        \"appNexus\":{\r\n            \"ad\":{\r\n                adProvider:\"AppNexus\"\r\n                }\r\n        },\r\n        \"btf\":{\r\n            \"ad\": {\r\n                \"GPT\": {\r\n                    \"adunit\": \"/5555/adconion.hogarutil.es/home\"\r\n                },\r\n                \"AppNexus\": {\r\n                    \"adunit\":11173262\r\n                }\r\n            }\r\n        }\r\n    },\r\n    slots: {\r\n        \"default\": {},\r\n        \"POSITION1\": {\r\n            enabled:true,\r\n            tags: [\"roba\",\"btf\",\"gpt\",\"simpleContainer\"],\r\n        },\r\n        \"POSITION3\": {\r\n            enabled: true,\r\n            tags:[\"roba\",\"gpt\",\"btf\",\"simpleContainer\",\"delayed\"]\r\n        },\r\n        \"POSITION2\":{\r\n            enabled:true,\r\n            tags:[\"roba\",{cond:{expr:\"browser.device==\\\"desktop\\\" && rand() > 50\",onTrue:\"gpt\",onFalse:\"appNexus\"}},\"btf\",\"simpleContainer\"]\r\n\r\n        }\r\n    }\r\n};\r\n\r\n\r\nlet inst=new PageManager(sContainer,sampleAdConfig);\r\ninst.initialize();","export default class Evented {\r\n\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n\r\n    destruct() {\r\n        if (this.runningListeners) {\r\n            this.runningListeners.map(function (i) {\r\n                i.target.removeListeners(this);\r\n            })\r\n        }\r\n        // If this destructor was called while this object was notifying its listeners,\r\n        // simply set a flag and return.\r\n        if (this.notifying) {\r\n            this.mustDestruct = true;\r\n            return;\r\n        }\r\n        this.runningListeners = null;\r\n        this.listeners = null;\r\n\r\n    }\r\n\r\n    addListener(evType, object, method, param, target) {\r\n        if (!this.listeners[evType])\r\n            this.listeners[evType] = [];\r\n\r\n        var k;\r\n        for (k = 0; k < this.listeners[evType].length; k++) {\r\n            if (this.listeners[evType][k].obj == object && this.listeners[evType][k].method == method) {\r\n                return;\r\n            }\r\n        }\r\n        this.listeners[evType].push({\r\n            obj: object,\r\n            method: method,\r\n            param: param,\r\n            target: target\r\n        });\r\n    }\r\n\r\n    removeListener(evType, object, method, target) {\r\n        if (!this.listeners) return;\r\n        if (!this.listeners[evType]) return;\r\n        var k, curL;\r\n        for (k = 0; k < this.listeners[evType].length; k++) {\r\n            curL = this.listeners[evType][k];\r\n            if (curL.obj == object && (!method || (method == curL.method))) {\r\n                if (target) {\r\n                    if (curL.target != target)\r\n                        continue;\r\n                }\r\n                this.listeners[evType].splice(k, 1);\r\n                if (object && object.removeRunningListener) {\r\n                    object.removeRunningListener(this);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeListeners(object) {\r\n        if (!this.listeners) return;\r\n        var k, j;\r\n        for (k in this.listeners) {\r\n            for (j = 0; j < this.listeners[k].length; j++) {\r\n                if (this.listeners[k][j].obj == object) {\r\n                    this.listeners[k].splice(j, 1);\r\n                    j--;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    notify(evType, data, target) {\r\n        if (!this.listeners) return;\r\n        if (!this.listeners[evType]) {\r\n            return;\r\n        }\r\n        this.notifying = true;\r\n        var k;\r\n        var obj;\r\n        for (k = 0; k < this.listeners[evType].length; k++) {\r\n            obj = this.listeners[evType][k];\r\n            if (obj.obj) {\r\n                if (typeof obj.obj == \"function\") {\r\n                    obj.obj(evType, data, obj.param, target);\r\n                }\r\n                else {\r\n                    if (!obj.obj[obj.method])\r\n                        continue;\r\n                    obj.obj[obj.method](evType, data, obj.param, target);\r\n                }\r\n            }\r\n            else {\r\n                obj.method(evType, data, obj.param, target);\r\n            }\r\n        }\r\n        // The following is a protection code; if marks this object as \"notifying\",so, if as part of the notification, this object\r\n        // is destroyed, it will not destroy the listeners, but set the mustDestroy flag to true.\r\n        this.notifying = false;\r\n        if (this.mustDestroy) {\r\n            this.listeners = null;\r\n        }\r\n    }\r\n\r\n    fireEvent(event, data, target) {\r\n        if (data !== null) {\r\n            if (typeof data != \"undefined\")\r\n                data.target = target;\r\n            else\r\n                data = {\r\n                    target: target\r\n                };\r\n            data.src = this;\r\n        }\r\n        this.notify(event, data, target);\r\n    }\r\n}\r\n","import SMCPromise from './SMCPromise';\r\nimport Evented from \"./Evented\"\r\n\r\nexport default class Promised extends Evented\r\n{\r\n    constructor()\r\n    {\r\n        super()\r\n        this._resolvePromises={};\r\n        this._beforePromises={};\r\n        this._finishedPromises={};\r\n        this._promises={};\r\n        this._afterCallbacks=[];\r\n        this._currentState=null;\r\n        this.nextState=null;\r\n        this._postPromise={};\r\n    }\r\n    before(state)\r\n    {\r\n        this.addPromisedState(state);\r\n        return {wait:(promise)=>this.addPromiseToState(state,promise)};\r\n    }\r\n    waitFinished(state)\r\n    {\r\n        if(this._finishedPromises[state]===undefined)\r\n            this._finishedPromises[state]=SMCPromise();\r\n        return this._finishedPromises[state];\r\n    }\r\n    addPromisedState(state)\r\n    {\r\n        if(this._beforePromises[state]===undefined) {\r\n            this._beforePromises[state] = [];\r\n            this._postPromise[state]=SMCPromise();\r\n            this._promises[state]=SMCPromise();\r\n        }\r\n    }\r\n    addPromiseToState(state,promise)\r\n    {\r\n        this.addPromisedState(state);\r\n        this._beforePromises[state].push(promise);\r\n    }\r\n    /*\r\n     if(this._beforePromises[state]===undefined) {\r\n            this._beforePromises[state] = [];\r\n            this._postPromise[state]=SMCPromise();\r\n            this._promises[state]=SMCPromise();\r\n        }\r\n     */\r\n    setState(state)\r\n    {\r\n        let execOwnCallback=()=>{\r\n            let outCb=\"on\"+this._currentState+\"Finished\";\r\n            if(this[outCb])\r\n                this[outCb].apply(this);\r\n            if(this._finishedPromises[this._currentState]!==undefined)\r\n                this._finishedPromises[this._currentState].resolve();\r\n\r\n            if(this[\"on\"+state])\r\n                this[\"on\"+state].apply(this);\r\n        }\r\n        let execCallbacks=function(){\r\n            if(this._afterCallbacks[state]===undefined)\r\n                return;\r\n            this._afterCallbacks[state].map((f)=>f.apply(null));\r\n        }.bind(this);\r\n\r\n        if(this._beforePromises[state] === undefined) {\r\n            return {\r\n                then: (c) => {\r\n                    execOwnCallback();\r\n                    this._currentState=state;\r\n                    execCallbacks();\r\n                    c.apply(null);\r\n                    if(this._finishedPromises[state]===undefined)\r\n                        this._finishedPromises[state]=SMCPromise();\r\n                    this._finishedPromises[state].resolve();\r\n\r\n                }\r\n            };\r\n        }\r\n        let localPromise=SMCPromise();\r\n\r\n        this._promises[state].all(this._beforePromises[state]).then(()=>{\r\n\r\n            execOwnCallback();\r\n            this._currentState=state;\r\n            execCallbacks();\r\n            this._postPromise[state].resolve();\r\n            localPromise.resolve();\r\n\r\n        })\r\n        return localPromise;\r\n    }\r\n    run(stateArray)\r\n    {\r\n        let p=SMCPromise();\r\n        this.stateArray=stateArray;\r\n        this.currentState=0;\r\n        this._runStates(stateArray,p);\r\n\r\n        return p;\r\n    }\r\n    _runStates(stateArray,endPromise)\r\n    {\r\n        if(this.currentState===stateArray.length)\r\n            return endPromise.resolve();\r\n\r\n        this.setState(stateArray[this.currentState]).then(()=>{\r\n            if(this.nextState!==null)\r\n            {\r\n                this.currentState=this.nextState;\r\n                this.nextState=null;\r\n            }\r\n            else\r\n                this.currentState++;\r\n            this._runStates(stateArray,endPromise);\r\n        })\r\n    }\r\n    // Metodo semantico.Permite construcciones del tipo:\r\n    // testI.before(\"A\").wait(test2I.isInState(\"B\"))\r\n    isInState(state)\r\n    {\r\n        if(this._finishedPromises[state]!==undefined)\r\n            return this._finishedPromises[state];\r\n        this.addPromisedState(state)\r\n        return this._postPromise[state];\r\n    }\r\n    gotoState(state)\r\n    {\r\n        this.nexState=this.stateArray.indexOf(state);\r\n        if(this.nextState<0)\r\n            this.nextState=null;\r\n    }\r\n    prependPromises(states)\r\n    {\r\n        for(let k in states)\r\n        {\r\n            if(this._resolvePromises[k]===undefined)\r\n                this._resolvePromises[k]=SMCPromise(k);\r\n            this.before(states[k]).wait(this._resolvePromises[k]);\r\n        }\r\n    }\r\n    resolve(state)\r\n    {\r\n        if(this._resolvePromises[state]===undefined)\r\n            this._resolvePromises[state]=SMCPromise();\r\n\r\n        this._resolvePromises[state].resolve();\r\n    }\r\n    discard(promises)\r\n    {\r\n        promises.map((i)=>{\r\n            this._resolvePromises[i].resolve();\r\n        });\r\n    }\r\n}\r\n\r\n","import * as SMC from '../Common.js'\r\n    function g(h) {\r\n        return SMC.isFunction(h)\r\n    }\r\n\r\n    function defer(h) {\r\n        //\"undefined\" != typeof setImmediate ? setImmediate(h) : \"undefined\" != typeof process && process.nextTick ? process.nextTick(h) : setTimeout(h, 0)\r\n        h();\r\n    }\r\n\r\n    export default function SMCPromise(label) {\r\n    let state;           // undefined/null = pending, true = fulfilled, false = rejected\r\n    let values = [];     // an array of values as arguments for the then() handlers\r\n    let deferred = [];   // functions to call when set() is invoked\r\n\r\n    let set = function(newState, newValues) {\r\n        return set.__resolve(newState,newValues);\r\n    };\r\n    set[\"resolve\"]=function(val)\r\n    {\r\n\r\n        return set[\"__resolve\"](true,val);\r\n    }\r\n    set[\"__resolve\"]=function(newState,newValues)\r\n    {\r\n\r\n        if (state == null && newState != null) {\r\n            state = newState;\r\n            values = newValues;\r\n            if (deferred.length)\r\n                defer(function() {\r\n                    for (let i = 0; i < deferred.length; i++)\r\n                        deferred[i]();\r\n                });\r\n        }\r\n        return state;\r\n    };\r\n    set[\"reject\"]=function(){\r\n        set.__resolve(false);\r\n    };\r\n\r\n    set[\"timeout\"] = function (timeoutMs,value) {\r\n            setTimeout(function () {\r\n                set.resolve(value);\r\n            }, timeoutMs);\r\n            return set;\r\n        };\r\n    set[\"all\"] = function (promiseArray) {\r\n            if(!SMC.isset(promiseArray) || promiseArray.length==0)\r\n            {\r\n                set.resolve([]);\r\n            }\r\n            else {\r\n                let n = promiseArray.length;\r\n                let result = new Array(n);\r\n                promiseArray.map(function (p, i) {\r\n\r\n                    p.then(function (res) {\r\n\r\n                        result[i] = res;\r\n                        n--;\r\n                        if (n == 0) {\r\n                            set.resolve([result])\r\n                        };\r\n                    }, function () {\r\n                        set.reject();\r\n                    })\r\n                })\r\n            }\r\n            return set;\r\n        };\r\n\r\n    set['then'] = function (onFulfilled, onRejected) {\r\n\r\n        let promise2 = SMCPromise(label);\r\n        let callCallbacks = function() {\r\n            try {\r\n                let f = (state ? onFulfilled : onRejected);\r\n                if (SMC.isFunction(f)) {\r\n                    let resolve= function(x) {\r\n                        let then, cbCalled = 0;\r\n                        try {\r\n                            if (x && (SMC.isObject(x) || SMC.isFunction(x)) && SMC.isFunction(then = x['then'])) {\r\n                                if (x === promise2)\r\n                                    throw new TypeError();\r\n                                then['call'](x,\r\n                                    function() { if (!cbCalled++) resolve.apply(undef,arguments); } ,\r\n                                    function(value){ if (!cbCalled++) promise2(false,[value]);});\r\n                            }\r\n                            else\r\n                                 promise2(true, arguments);\r\n                        }\r\n                        catch(e) {\r\n                            if (!cbCalled++)\r\n                                promise2(false, [e]);\r\n                        }\r\n                    }\r\n                    resolve(f.apply(null, [values] || []));\r\n                }\r\n                else\r\n                    promise2(state, values);\r\n            }\r\n            catch (e) {\r\n                console.error(\"Excepcion en promesa:\")\r\n                console.dir(e);\r\n                promise2(false, [e]);\r\n            }\r\n        };\r\n        if (state != null)\r\n            defer(callCallbacks);\r\n        else\r\n            deferred.push(callCallbacks);\r\n        return promise2;\r\n    };\r\n    set.label=label;\r\n    set.getState=function(){return state;}\r\n    return set;\r\n};\r\n","import * as Common from '../Common.js';\r\nlet ua=\"\";\r\nfunction getMatch(regex, pos)\r\n{\r\n    let match = ua.match(regex);\r\n    return (match && match.length > 1 && match[pos]) || '';\r\n}\r\n\r\nfunction getFirst(regex)\r\n{\r\n    return getMatch(regex, 1);\r\n}\r\n\r\nfunction getSecond(regex)\r\n{\r\n    return getMatch(regex, 2);\r\n}\r\nexport function browserInfo() {\r\n\r\n    try {\r\n        let t = true;\r\n        ua = window.navigator.userAgent;\r\n        let r = function (rr) {\r\n            return rr.test(ua);\r\n        }\r\n\r\n\r\n        let chromium=false,safari=false,googlebot=false;\r\n        let iosdevice = getFirst(/(ipod|iphone|ipad)/i).toLowerCase()\r\n            , android = r(/android/i)\r\n            , chromeos = r(/CrOS/)\r\n            , webos = r(/(web|hpw)os/i)\r\n            , windowsphone = r(/windows phone/i)\r\n            , windows = !windowsphone && r(/windows/i)\r\n            , mac = !iosdevice && r(/macintosh/i)\r\n            , linux = !android && !webos && r(/linux/i)\r\n            , edgeVersion = getSecond(/edg([ea]|ios)\\/(\\d+(\\.\\d+)?)/i)\r\n            , versionIdentifier = getFirst(/version\\/(\\d+(\\.\\d+)?)/i)\r\n            , tablet = r(/tablet/i) && !r(/tablet pc/i)\r\n            , mobile = !tablet && r(/[^-]mobi/i)\r\n            , xbox = r(/xbox/i),\r\n            name = null, version = null, osname = null, device = \"desktop\", blackberry = false;\r\n\r\n        if (r(/opera/i)) {\r\n            name = 'Opera';\r\n            version = versionIdentifier || getFirst(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\r\n        } else if (r(/opr\\/|opios/i)) {\r\n            name = 'Opera';\r\n            version = getFirst(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier;\r\n        }\r\n        else if (r(/SamsungBrowser/i)) {\r\n            name = 'Samsung Internet for Android';\r\n            version = versionIdentifier || getFirst(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\r\n        }\r\n        else if (windowsphone) {\r\n            name = 'Windows Phone';\r\n            osname = 'Windows Phone';\r\n            if (edgeVersion)\r\n                version = edgeVersion;\r\n            else\r\n                version = getFirst(/iemobile\\/(\\d+(\\.\\d+)?)/i)\r\n        }\r\n        else if (r(/msie|trident/i)) {\r\n            name = 'Internet Explorer';\r\n            version = getFirst(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\r\n        } else if (chromeos) {\r\n            name = 'Chrome'\r\n            osname = 'Chrome OS';\r\n            chromeos = true;\r\n            version = getFirst(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\r\n        } else if (r(/edg([ea]|ios)/i)) {\r\n            name = 'Microsoft Edge';\r\n            version = edgeVersion;\r\n        }\r\n        else if (r(/firefox|iceweasel|fxios/i)) {\r\n            name = 'Firefox';\r\n            version = getFirst(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i);\r\n            if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua))\r\n                osname = 'Firefox OS'\r\n        }\r\n        else if (r(/blackberry|\\bbb\\d+/i) || r(/rim\\stablet/i)) {\r\n            name = 'BlackBerry';\r\n            osname = 'BlackBerry OS';\r\n            blackberry = t;\r\n            version = versionIdentifier || getFirst(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\r\n        }\r\n        else if (webos) {\r\n            name = 'WebOS';\r\n            osname = 'WebOS';\r\n            version = versionIdentifier || getFirst(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i);\r\n        }\r\n        else if (r(/chromium/i)) {\r\n            name = 'Chromium';\r\n            chromium = t;\r\n            version = getFirst(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier;\r\n        }\r\n        else if (r(/chrome|crios|crmo/i)) {\r\n            name = 'Chrome';\r\n            version = getFirst(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i);\r\n        }\r\n        else if (android) {\r\n            name = 'Android';\r\n            version = versionIdentifier;\r\n        }\r\n        else if (r(/safari|applewebkit/i)) {\r\n            name = 'Safari';\r\n            safari = t;\r\n            if (versionIdentifier) {\r\n                version = versionIdentifier\r\n            }\r\n        }\r\n        else if (iosdevice) {\r\n            name = iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod';\r\n            if (versionIdentifier) {\r\n                version = versionIdentifier\r\n            }\r\n        }\r\n        else if (r(/googlebot/i)) {\r\n            name = 'Googlebot';\r\n            googlebot = t;\r\n            version = getFirst(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier;\r\n        }\r\n        else {\r\n            name = getFirst(/^(.*)\\/(.*) /),\r\n                version = getSecond(/^(.*)\\/(.*) /)\r\n        }\r\n\r\n        // set OS flags for platforms that have multiple browsers\r\n        if (!windowsphone && android)\r\n            osname = 'Android';\r\n        else if (!windowsphone && iosdevice)\r\n            osname = 'iOS';\r\n        else if (mac)\r\n            osname = 'macOS';\r\n        else if (xbox)\r\n            osname = 'Xbox';\r\n        else if (windows)\r\n            osname = 'Windows';\r\n        else if (linux)\r\n            osname = 'Linux';\r\n\r\n\r\n        let getWindowsVersion = function (s) {\r\n\r\n            let tt = {\r\n                'NT': 'NT',\r\n                'XP': 'XP',\r\n                'NT 5.0': '2000',\r\n                'NT 5.1': 'XP',\r\n                'NT 5.2': '2003',\r\n                'NT 6.0': 'Vista',\r\n                'NT 6.1': '7',\r\n                'NT 6.2': '8',\r\n                'NT 6.3': '8.1',\r\n                'NT 10.0': '10'\r\n            };\r\n            return typeof tt[s] == \"undefined\" ? null : tt[s];\r\n        }\r\n\r\n        // OS version extraction\r\n        let osVersion = '';\r\n        if (windows) {\r\n            osVersion = getWindowsVersion(getFirst(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i))\r\n        } else if (windowsphone) {\r\n            osVersion = getFirst(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\r\n        } else if (mac) {\r\n            osVersion = getFirst(/Mac OS X (\\d+([_\\.\\s]\\d+)*)/i);\r\n            osVersion = osVersion.replace(/[_\\s]/g, '.');\r\n        } else if (iosdevice) {\r\n            osVersion = getFirst(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\r\n            osVersion = osVersion.replace(/[_\\s]/g, '.');\r\n        } else if (android) {\r\n            osVersion = getFirst(/android[ \\/-](\\d+(\\.\\d+)*)/i);\r\n        } else if (blackberry) {\r\n            osVersion = getFirst(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\r\n        }\r\n\r\n        // device type extraction\r\n        let osMajorVersion = !windows && osVersion.split('.')[0];\r\n        if (!osMajorVersion) osMajorVersion = \"\";\r\n        if (\r\n            tablet\r\n            || iosdevice == 'ipad'\r\n            || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\r\n        ) {\r\n            device = \"tablet\";\r\n        } else if (\r\n            mobile\r\n            || iosdevice == 'iphone'\r\n            || iosdevice == 'ipod'\r\n            || android\r\n            || blackberry\r\n        ) {\r\n            device = \"mobile\";\r\n        }\r\n        let wn = window.navigator;\r\n        return {\r\n            browserName: name,\r\n            browserVersion: version,\r\n            osName: osname,\r\n            osVersion: osVersion,\r\n            osMajorVersion: osMajorVersion,\r\n            device: device,\r\n            deviceCores: wn.hardwareConcurrency || 0,\r\n            browserLanguage: wn.language || \"\",\r\n            browserAgent: wn.userAgent\r\n        }\r\n    }\r\n    catch(e){\r\n        return {\r\n            browserName: \"\",\r\n            browserVersion: \"\",\r\n            osName: \"\",\r\n            osVersion: \"\",\r\n            osMajorVersion: \"\",\r\n            device: \"\",\r\n            deviceCores: 0,\r\n            browserLanguage: \"\",\r\n            browserAgent: \"\"\r\n        };\r\n    }\r\n\r\n}\r\n","export function setCookie(name,value,days) {\r\n    let expires = \"\";\r\n    if (days) {\r\n        let date = new Date();\r\n        date.setTime(date.getTime() + (days*24*60*60*1000));\r\n        expires = \"; expires=\" + date.toUTCString();\r\n    }\r\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n}\r\n\r\nexport function getCookie(name) {\r\n    let nameEQ = name + \"=\";\r\n    let ca = document.cookie.split(';');\r\n    for(let i=0;i < ca.length;i++) {\r\n        let c = ca[i];\r\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function eraseCookie(name) {\r\n    createCookie(name,\"\",-1);\r\n}","import * as Geometry from './Geometry.js';\r\n\r\nlet defaultWindow=top;\r\nexport function setDefaultWindow(w)\r\n{\r\n    defaultWindow=w;\r\n}\r\nexport function onLoad(callback,w=defaultWindow)\r\n{\r\n    if(w.document.readyState===\"complete\")\r\n        return callback.apply();\r\n    w.addEventListener(\"load\", callback, false);\r\n}\r\nexport function onReady(callback,w=defaultWindow)\r\n{\r\n    if(w.document.readyState===\"complete\" || w.document.readyState===\"interactive\")\r\n        return callback.apply();\r\n    w.addEventListener(\"DOMContentLoaded\", callback, false);\r\n}\r\nexport function onUnload(callback,w=defaultWindow)\r\n{\r\n    w.addEventListener(\"unload\",callback, false);\r\n}\r\nexport function isPageHidden(w=defaultWindow)\r\n{\r\n    let d=w.document;\r\n    let hidden=\"\";\r\n    if (d.hidden!==undefined) { // Opera 12.10 and Firefox 18 and later support\r\n        hidden = \"hidden\";\r\n    } else if (d.msHidden!==undefined) {\r\n        hidden = \"msHidden\";\r\n    } else if (d.webkitHidden!==undefined) {\r\n        hidden = \"webkitHidden\";\r\n    } else { return false; }\r\n    return d[hidden];\r\n}\r\nexport function onBrowserVisibilityChange(callback,w=defaultWindow)\r\n{\r\n    let d=w.document;\r\n    let visibilityChange=null;\r\n    if (d.hidden!==undefined) { // Opera 12.10 and Firefox 18 and later support\r\n        visibilityChange = \"visibilitychange\";\r\n    } else if (d.msHidden!==undefined) {\r\n        visibilityChange = \"msvisibilitychange\";\r\n    } else if (d.webkitHidden!==undefined) {\r\n        visibilityChange = \"webkitvisibilitychange\";\r\n    } else { return false; }\r\n    d.addEventListener(visibilityChange, callback, false);\r\n}\r\n\r\nexport function onVisibilityChange(element, callback, offset=0 )\r\n{\r\n    if(typeof window.IntersectionObserver!==null)\r\n    {\r\n        let thresholds=[];\r\n        for(let k=0;k<11;k++)thresholds.push(k/10);\r\n        let observer=new IntersectionObserver(callback,{root:null,rootMargin:offset+\"px\",threshold:thresholds});\r\n        observer.observe(element);\r\n    }\r\n    else\r\n    {\r\n        (function(){\r\n            let lastPercent=null;\r\n            let f=function(){\r\n                let vis=getVisiblePercentage(element);\r\n                if(vis!==lastPercent && lastPercent!==null)\r\n                    callback();\r\n                lastPercent=vis;\r\n            };\r\n            setInterval(f,100);\r\n        })();\r\n    }\r\n}\r\n\r\nexport function onPageHide(callback,w=defaultWindow) {\r\n    if ('onpagehide' in window)\r\n        w.addEventListener('pagehide', callback);\r\n}\r\nexport function onPageShow(callback,w=defaultWindow) {\r\n    if('onpageshow' in top )\r\n        w.addEventListener('pageshow',callback);\r\n}\r\nexport function onResize(callback,w=defaultWindow)\r\n{\r\n    w.addEventListener('resize', callback, false);\r\n}\r\nexport function onScroll(callback,w=defaultWindow) {\r\n    w.addEventListener('scroll', callback, true);\r\n}\r\nexport function onError(callback,w=defaultWindow)\r\n{\r\n    w.addEventListener('error', callback);\r\n}\r\nexport function getViewportHeight(w=defaultWindow) {\r\n    let d = document,\r\n        e = d.documentElement,\r\n        g = d.getElementsByTagName('body')[0];\r\n    return w.innerHeight || e.clientHeight || g.clientHeight;\r\n};\r\n\r\nexport function getViewportWidth(w=defaultWindow) {\r\n    let d = document,\r\n        e = d.documentElement,\r\n        g = d.getElementsByTagName('body')[0];\r\n    return w.innerWidth || e.clientWidth || g.clientWidth;\r\n};\r\nexport function getPageWidth(w=defaultWindow)\r\n{\r\n    return w.document.documentElement.offsetWidth;\r\n}\r\nexport function getPageHeight(w=defaultWindow)\r\n{\r\n    return w.document.documentElement.offsetHeight;\r\n}\r\nexport function getVisibleViewportRect(w=defaultWindow)\r\n{\r\n    let ys=getYScroll(w),xs=getXScroll(w);\r\n    return {\r\n        top:ys,bottom:ys+getViewportHeight(w),left:xs,right:xs+getViewportWidth(w)\r\n    };\r\n}\r\nexport function getYScroll(w=defaultWindow){\r\n    return (w.document.documentElement.scrollTop ?\r\n        w.document.documentElement.scrollTop :\r\n        w.document.body.scrollTop);\r\n}\r\nexport function getXScroll(w=defaultWindow)\r\n{\r\n    return (w.document.documentElement.scrollLeft ?\r\n        w.document.documentElement.scrollLeft :\r\n        w.document.body.scrollLeft);\r\n}\r\n\r\n\r\nfunction __isInViewport(el,offset=0,full=false,w=defaultWindow)\r\n{\r\n    let d = getElementCoordinates(el);\r\n    let v = getVisibleViewportRect(w);\r\n    if(!Geometry.withinRange(v,d,offset))\r\n        return false;\r\n    if(!full)\r\n        return true;\r\n    return Geometry.isSquareContained(d,v);\r\n}\r\n\r\nfunction getPercentage(el,w,target=\"v\")\r\n{\r\n    let d = getElementCoordinates(el);\r\n    let v = getVisibleViewportRect(w);\r\n    let i=Geometry.getIntersection(d,v);\r\n    if(i==null)\r\n        return 0;\r\n    return (Geometry.getArea(i)/Geometry.getArea(target==\"v\"?v:d)).toFixed(2);\r\n}\r\nexport function getVisiblePercentage(el,w=defaultWindow)\r\n{\r\n    return getPercentage(el,w,\"d\")\r\n\r\n}\r\nexport function getScreenPercentage(el,w=defaultWindow)\r\n{\r\n    return getPercentage(el,w,\"v\")\r\n}\r\nexport function isInViewport(el,offset,w=defaultWindow)\r\n{\r\n    return __isInViewport(el,offset,true,w);\r\n}\r\nexport function isPartiallyInViewport(el,offset,w=defaultWindow)\r\n{\r\n    return __isInViewport(el,offset,false,w);\r\n}\r\n\r\n\r\nexport function getElementCoordinates(element)\r\n{\r\n        var theDiv = element;\r\n        if (theDiv == null) return null;\r\n        var addTop=0;\r\n        var orDisplay=theDiv.style.display;\r\n        var orParent=theDiv.parentElement;\r\n        var oWidth=theDiv.offsetWidth;\r\n        var oHeight=theDiv.offsetHeight;\r\n        if(theDiv.style.display=='none')\r\n        {\r\n\r\n            var nt=theDiv.previousSibling;\r\n            theDiv=null;\r\n            try {\r\n                while (nt != null && theDiv==null) {\r\n                    nt = nt.previousSibling;\r\n                    if(SMC.isset(nt.offsetHeight))\r\n                    {\r\n                        theDiv=nt;\r\n                        addTop=nt.offsetHeight;\r\n\r\n                    }\r\n\r\n                }\r\n                if(theDiv==null)\r\n                    theDiv=theDiv.parentElement;\r\n            }\r\n            catch(e)\r\n            {\r\n\r\n            }\r\n        }\r\n        if (theDiv == null) return null;\r\n\r\n        var target = theDiv,\r\n            target_width = target.offsetWidth,\r\n            target_height = target.offsetHeight,\r\n            target_left = target.offsetLeft,\r\n            target_top = target.offsetTop,\r\n            gleft = 0,\r\n            gtop = 0,\r\n            rect = {};\r\n\r\n        var moonwalk = function (_parent) {\r\n            if (!!_parent) {\r\n                gleft += _parent.offsetLeft;\r\n                gtop += _parent.offsetTop;\r\n                moonwalk(_parent.offsetParent);\r\n            } else {\r\n                return rect = {\r\n                    top: target.offsetTop + gtop,\r\n                    left: target.offsetLeft + gleft,\r\n                    bottom: (target.offsetTop + gtop) + target_height,\r\n                    right: (target.offsetLeft + gleft) + target_width\r\n                };\r\n            }\r\n        };\r\n        moonwalk(target.offsetParent);\r\n        rect.divDisplay=orDisplay;\r\n        rect.parentDisplay='block';\r\n        rect.width=oWidth;\r\n        rect.height=oHeight;\r\n        while(orParent!=null)\r\n        {\r\n            if(orParent.style && orParent.style.display==\"none\")\r\n            {\r\n                rect.parentDisplay='none';\r\n            }\r\n            orParent=orParent.parentElement;\r\n        }\r\n\r\n        return rect;\r\n}\r\n\r\nexport function getScreenWidth() { return window.screen.width;}\r\nexport function getScreenHeight() { return window.screen.height;}\r\n\r\nlet customStylesheet=null;\r\nfunction addCSSRule(selector,rule)\r\n{\r\n    if(customStylesheet===null)\r\n    {\r\n        let node=document.createElement(\"style\");\r\n        node.appendChild(document.createTextNode(\"\"));\r\n        document.head.appendChild(node);\r\n        customStylesheet=node.sheet;\r\n    }\r\n    if(customStylesheet.insertRule!==undefined)\r\n        customStylesheet.insertRule(selector+\" {\"+rule+\"}\",-1);\r\n    if(customStylesheet.addRule!==undefined)\r\n        customStylesheet.addRule(selector,rule,-1);\r\n}\r\n\r\n","// Devuelve true si la box v y d estan alejadas un maximo de offset entre si.\r\n// Si offset es 0, significa que se intersectan\r\nexport function withinRange(d,v,offset=0)\r\n{\r\n    let distances=[\r\n        v.left - d.right, // El div demasiado a la izquierda.\r\n        d.left-v.right, // Div demasiado a la derecha.\r\n        v.top - d.bottom, // Div demasiado arriba.\r\n        d.top - v.bottom // Div demasiado abajo.\r\n    ];\r\n    // Si cualquiera de los anteriores es positivo, no hay interseccion.\r\n    let acc=0;\r\n    for(let k=0;k<4;k++)\r\n    {\r\n        if(distances[k]>0)\r\n            acc+=distances[k];\r\n    }\r\n    if(acc>0 && (offset==0 || offset < acc))\r\n        return false;\r\n    return true;\r\n}\r\n\r\n// v es el container, d es el contenido\r\nexport function isSquareContained(d,v)\r\n{\r\n    return d.left >= v.left && d.right <=v.right && d.top >=v.top && d.bottom <=v.bottom;\r\n}\r\n\r\nexport function getIntersection(d,v)\r\n{\r\n    if(!withinRange(d,v,0))\r\n        return null;\r\n    let a={\r\n        right:Math.min(d.right,v.right),\r\n        left:Math.max(d.left,v.left),\r\n        top:Math.max(d.top,v.top),\r\n        bottom:Math.min(d.bottom,v.bottom)\r\n    };\r\n    return (a.right<0 || a.left<0 || a.top<0 || a.bottom<0)?null:a;\r\n}\r\nexport function getArea(d)\r\n{\r\n    return (d.right-d.left)*(d.bottom-d.top);\r\n}","import Service from '../Service/Service';\r\nimport * as Common from '../Common.js';\r\nimport * as Compat from './CrossCompat.js';\r\nimport * as Geometry from './Geometry.js';\r\nimport * as Browser from './Browser';\r\nimport * as UrlInfo from './UrlInfo';\r\nimport Timing from './Timing';\r\nexport default class PageStats extends Service\r\n{\r\n    initialize(){\r\n        this.enabled = true;\r\n        this.w=this.config.window || window;\r\n        Compat.setDefaultWindow(this.w);\r\n        // Se comprueba si es posible obtener estadisticas de la ventana objetivo.\r\n        try {\r\n            let d=this.w.document;\r\n            let w = this.w;\r\n            this.accumShown=0;\r\n            this.accumHidden=0;\r\n            this.nShows=0;\r\n            this.nHides=0;\r\n            this.isHidden=Compat.isPageHidden();\r\n            this.shownRef=0;\r\n            this.processorSpeed=-1;\r\n            this.networkSpeed=-1;\r\n\r\n            this.pixelsScrolled=Compat.getYScroll();\r\n            this.currentScroll=this.pixelsScrolled;\r\n            this.maxScroll=this.currentScroll;\r\n            this.lastScrollTime=-1;\r\n            this.firstScroll=-1;\r\n            this.getProcessorSpeed();\r\n            this.getNetworkSpeed();\r\n            this.currentViewport=Compat.getVisibleViewportRect();\r\n            // Array de 5 elementos para almacenar los tiempos de visionado de cada 20% de la pagina.\r\n            this.viewableZoneTimes=[0,0,0,0,0];\r\n            this.nJsErrors=0;\r\n\r\n            this.navigatorW=Compat.getViewportWidth(w);\r\n            this.navigatorH=Compat.getViewportHeight(w);\r\n\r\n            let hidFunc=(isHidden)=>{\r\n\r\n                if(isHidden===this.isHidden)\r\n                    return;\r\n                this.isHidden=isHidden;\r\n                this.nShows+=isHidden?0:1;\r\n                this.nHides+=isHidden?1:0;\r\n                this.updateShownTimings(isHidden);\r\n            };\r\n            this.scheduler=this.getService(\"Scheduler\");\r\n            this.scheduler.schedule({every:\"PAGESHOW\"},function(){hidFunc(false);})\r\n            this.scheduler.schedule({every:\"PAGEHIDE\"},function(){hidFunc(true);})\r\n\r\n            Compat.onScroll(()=>this.handleScroll());\r\n            Compat.onResize(()=>this.handleScroll());\r\n            Compat.onError(()=>this.nJsErrors++);\r\n        }\r\n        catch(e){\r\n            this.enabled=false;\r\n            console.dir(e);\r\n        }\r\n    }\r\n    isEnabled(){return this.enabled;}\r\n    updateShownTimings(isHidden)\r\n    {\r\n        let elapsed=this.relativeTimestamp(this.shownRef);\r\n        this.accumShown+=isHidden?0:elapsed;\r\n        this.accumHidden+=isHidden?elapsed:0;\r\n        this.shownRef=this.relativeTimestamp();\r\n    }\r\n    relativeTimestamp(reference=0){\r\n        return this.w.performance.now()-reference;\r\n    }\r\n    getStats(){\r\n        let tims=(new Date()).getTime();\r\n        let localUrl=new UrlInfo.UrlInfo(this.w.location);\r\n        let pathParts=localUrl.getPathParts();\r\n        let nParts=pathParts.length;\r\n        let refererUrl=new UrlInfo.UrlInfo(this.w.document.referrer);\r\n        let bInfo=null;\r\n        bInfo = Browser.browserInfo();\r\n        let timings=Timing.getTimings();\r\n        let w=this.w;\r\n        let nRemoteScripts=null;\r\n\r\n        if(w.document.querySelector)\r\n        {\r\n            nRemoteScripts=w.document.querySelectorAll(\"script[src]\").length;\r\n        }\r\n        let origin=null;\r\n        let originLength=0;\r\n        let originList=null;\r\n        if (w.location.ancestorOrigins) {\r\n                originLength = w.location.ancestorOrigins.length;\r\n                origin = w.location.ancestorOrigins[0];\r\n                var originsTmp = [];\r\n                for (var k =0; k< w.location.ancestorOrigins.length;k++){\r\n                    originsTmp.push(w.location.ancestorOrigins[k]);\r\n                }\r\n                originList=originsTmp.join(\"|\");\r\n        }\r\n        else\r\n        {\r\n            originLength=0;\r\n            origin=w.location.origin;\r\n        }\r\n        let doNotTrack=false;\r\n        if (window.doNotTrack || navigator.doNotTrack || navigator.msDoNotTrack || 'msTrackingProtectionEnabled' in window.external)\r\n            doNotTrack=(window.doNotTrack == \"1\" || navigator.doNotTrack == \"yes\" || navigator.doNotTrack == \"1\" || navigator.msDoNotTrack == \"1\" || window.external.msTrackingProtectionEnabled())?true:false;\r\n\r\n        let hasCMP=\"unknown\";\r\n        try {\r\n            hasCMP=(top.__cmp!==undefined)\r\n        }catch(e){}\r\n\r\n        this.updateShownTimings(Compat.isPageHidden());\r\n        let data = {\r\n            pixelsScrolled: this.pixelsScrolled,\r\n            navigationStart: tims - Math.round(this.w.performance.now()),\r\n            bodyWidth: Compat.getPageWidth(this.w),\r\n            bodyHeight: Compat.getPageHeight(this.w),\r\n            navigatorWidth: Compat.getViewportWidth(),\r\n            navigatorHeight: Compat.getViewportHeight(),\r\n            screenWidth: Compat.getScreenWidth(),\r\n            screenHeight: Compat.getScreenHeight(),\r\n            orientation: Compat.getScreenWidth()> Compat.getScreenHeight()?\"landscape\":\"portrait\",\r\n            processorSpeed: this.processorSpeed,\r\n            networkSpeed: this.networkSpeed,\r\n            viewableTime0: this.viewableZoneTimes[0],\r\n            viewableTime20: this.viewableZoneTimes[1],\r\n            viewableTime40: this.viewableZoneTimes[2],\r\n            viewableTime60: this.viewableZoneTimes[3],\r\n            viewableTime80: this.viewableZoneTimes[4],\r\n            firstScroll: parseInt(this.firstScroll),\r\n            maxScroll: this.maxScroll,\r\n            referer: this.w.document.referrer,\r\n            refererDomain: refererUrl.getRootHost(),\r\n            origin:origin,\r\n            originLength:originLength,\r\n            originList:null,\r\n            protocol: localUrl.getProtocol(),\r\n            url: localUrl.getUrl(),\r\n            domain: localUrl.getRootHost(),\r\n            path1: nParts > 0 ? pathParts[0] : \"\",\r\n            path2: nParts > 1 ? pathParts[1] : \"\",\r\n            pageViewStart: (new Date().getTime()) - parseInt(this.w.performance.now()),\r\n            pageViewTime: parseInt(this.w.performance.now()),\r\n            nImages: this.w.document.getElementsByTagName(\"img\").length,\r\n            nScripts: this.w.document.getElementsByTagName(\"script\").length,\r\n            nVideos: this.w.document.getElementsByTagName('video').length,\r\n            nIframes: w.document.getElementsByTagName('iframe').length,\r\n            browserName: bInfo.browserName,\r\n            browserVersion: bInfo.browserVersion,\r\n            osName: bInfo.osName,\r\n            osVersion: bInfo.osVersion,\r\n            device: bInfo.device,\r\n            deviceCores: bInfo.deviceCores,\r\n            pageLoadTime: parseInt(timings.loadTime),\r\n            pageLoadEvent: parseInt(timings.loadEventTime),\r\n            pageReadyTime: parseInt(timings.readyTime),\r\n            pageReadyEvent: parseInt(timings.readyEventTime),\r\n            pageTransferSize: timings.transferSize || null,\r\n            pageDecodedSize: timings.decodedBodySize || null,\r\n            gotPageReady: document.readyState === \"interactive\" || document.readyState === \"complete\",\r\n            gotPageLoad: document.readyState === \"complete\",\r\n            headLength: (w.document.head && w.document.head.innerHTML) ? w.document.head.innerHTML.length : 0,\r\n            bodyLength: (w.document.body && w.document.body.innerHTML) ? w.document.body.innerHTML.length : 0,\r\n            nRemoteScripts: nRemoteScripts,\r\n            netInfoDownlink: null,\r\n            netInfoEffType: null,\r\n            netInfoRtt: null,\r\n            netInfoType: null,\r\n            netInfoDownlinkMax: null,\r\n            nPageHides: this.nHides,\r\n            nPageShows: this.nShows,\r\n            timeShowingPercent:Math.ceil(100*this.accumShown/this.w.performance.now()),\r\n            jsErrors:this.nJsErrors,\r\n            doNotTrack:doNotTrack,\r\n            cmp:hasCMP\r\n        };\r\n\r\n\r\n        if(Common.isset(navigator.connection))\r\n        {\r\n            let fields=[\"downlink\",\"effectiveType\",\"rtt\",\"type\",\"downlinkMax\"];\r\n            let variables=[\"netInfoDownlink\",\"netInfoEffType\",\"netInfoRtt\",\"netInfoType\",\"netInfoDownlinkMax\"];\r\n            for(let k=0;k<fields.length;k++)\r\n            {\r\n                let cV=fields[k];\r\n                if(Common.isset(navigator.connection[cV]))\r\n                    data[variables[k]]=navigator.connection[cV];\r\n            }\r\n            if(isNaN(parseFloat(data.netInfoDownlink)))\r\n                data.netInfoDownlink=0;\r\n        }\r\n\r\n        return data;\r\n        }\r\n        handleScroll()\r\n        {\r\n\r\n            let temp=Compat.getYScroll();\r\n            if(temp > this.maxScroll)\r\n                this.maxScroll=temp;\r\n\r\n            if(this.firstScroll===-1)\r\n                this.firstScroll=this.relativeTimestamp();\r\n            this.pixelsScrolled+=Math.abs(temp-this.currentScroll);\r\n            let lastViewport=this.currentViewport;\r\n            let elapsed=this.relativeTimestamp(this.lastScrollTime);\r\n            let pageZoneHeight=Compat.getPageHeight()/5;\r\n\r\n            let pageWidth=Compat.getPageWidth();\r\n            let viewportArea=Math.max(1,Geometry.getArea(lastViewport));\r\n\r\n            for(let k=0;k<5;k++)\r\n            {\r\n                let zoneCoords={left:0,right:pageWidth,top:k*pageZoneHeight,bottom:(k+1)*pageZoneHeight};\r\n                let inters=Geometry.getIntersection(zoneCoords,lastViewport);\r\n                if(inters)\r\n                {\r\n                    let screenPercent=Geometry.getArea(inters)/viewportArea;\r\n                    this.viewableZoneTimes[k]+=parseInt(elapsed*screenPercent);\r\n                }\r\n            }\r\n            this.currentViewport=Compat.getVisibleViewportRect();\r\n            this.lastScrollTime=this.relativeTimestamp();\r\n            this.currentScroll=temp;\r\n\r\n    }\r\n    getProcessorSpeed()\r\n    {\r\n        let t1 = this.w.performance.now();\r\n        for (let t = 0; t < 20000; t++);\r\n        this.processorSpeed = (this.w.performance.now() - t1);\r\n    }\r\n    getNetworkSpeed()\r\n    {\r\n        let imageAddr = this.config.cloudUrl+this.config.sampleFile;\"spt.png\";\r\n        let downloadSize = this.config.sampleSize;\r\n        let startTime=this.relativeTimestamp();\r\n        let download = new Image();\r\n        let j=this;\r\n        download.onload = function () {\r\n            j.networkSpeed=j.relativeTimestamp(startTime);\r\n        };\r\n        let cacheBuster = \"?nnn=\" + (new Date()).getTime();\r\n        download.src = imageAddr + cacheBuster;\r\n\r\n\r\n    }\r\n}","import * as Compat from './CrossCompat.js';\r\nimport SMCPromise from '../Arch/SMCPromise.js';\r\nimport Service from '../Service/Service';\r\nlet listeners = {};\r\nlet listenerCallbacks={};\r\nlet scrollListeners = [];\r\nlet unresolved=[];\r\n\r\nclass ScrollScheduler {\r\n    constructor(sc) {\r\n        this.scheduler = sc;\r\n        sc.schedule({when: 'LOAD'}, () => this.refreshYPosition());\r\n        this.elements = [];\r\n        this.runningTimer = null;\r\n        let m=this;\r\n\r\n        let f = function () {\r\n            /* Este timer sirve para evitar multiples llamadas durante un scroll o resize.\r\n               Tiene que mantenerse al menos 50 milisegundos sin eventos, antes de comprobar posiciones.\r\n             */\r\n            if (m.runningTimer)\r\n                clearTimeout(m.runningTimer);\r\n                m.runningTimer = setTimeout(function () {\r\n                m.runningTimer = null;\r\n                m.checkElements();\r\n            }, 50);\r\n        };\r\n        Compat.onResize(f);\r\n        Compat.onScroll(f);\r\n    }\r\n    schedule(config)\r\n    {\r\n        config.offset = config.offset || 0;\r\n        let p = SMCPromise();\r\n        if (CrossCompat.isInViewport(config.node,config.offset)) {\r\n                p.resolve(config);\r\n                return p;\r\n        }\r\n        config.promise = p;\r\n        this.elements.push(config);\r\n        return p;\r\n    }\r\n    checkElements () {\r\n        if (this.elements.length === 0)\r\n            return;\r\n        unresolved = [];\r\n        this.elements = this.elements.filter((e) => {\r\n            if (CrossCompat.isInViewport(e.node, e.offset)) {\r\n                e.promise.resolve();\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport default class Scheduler extends Service\r\n{\r\n    constructor(serviceContainer,config)\r\n    {\r\n        super(serviceContainer,config);\r\n        this.listeners={};\r\n        this.listenerCallbacks={};\r\n        Compat.onLoad(()=>this.resolve(\"LOAD\"));\r\n        Compat.onReady(()=>this.resolve(\"READY\"));\r\n        Compat.onUnload(()=>this.resolve(\"UNLOAD\"));\r\n        Compat.onBrowserVisibilityChange(()=>{console.log(\"CHANGED VISIBILITY\");this.resolve(Compat.isPageHidden()?\"PAGEHIDE\":\"PAGESHOW\")});\r\n        Compat.onPageHide(()=>this.resolve(Compat.isPageHidden()?\"PAGEHIDE\":\"PAGESHOW\"));\r\n\r\n    }\r\n    resolve(event)\r\n    {\r\n        if (this.listeners[event] == undefined )\r\n            this.listeners[event]=SMCPromise();\r\n\r\n        this.listeners[event].resolve();\r\n\r\n        if(this.listenerCallbacks[event]!= undefined)\r\n        {\r\n            this.listenerCallbacks[event].map(function(c){c.apply(null)});\r\n        }\r\n        this.fire(event);\r\n    }\r\n    buildEventPromise(event)\r\n    {\r\n        if (this.listeners[event]===undefined) {\r\n\r\n            this.listeners[event]=SMCPromise();\r\n        }\r\n        return this.listeners[event];\r\n    }\r\n    schedule(spec,cb)\r\n    {\r\n        if (spec == undefined || spec == null)\r\n            spec = {};\r\n\r\n        var m=this;\r\n        let localPromise = SMCPromise();\r\n\r\n\r\n            // Wrapper 1 sobre el callback: resuelve la promesa local\r\n            let ss = () => {\r\n                localPromise.resolve();\r\n                if(spec.fire!=undefined)\r\n                    m.fire(spec.fire)\r\n            };\r\n\r\n            // Wrapper 2 sobre el callback: resuelve el timeout\r\n            let t = null;\r\n            if (spec.timeout) t = function () {\r\n                setTimeout(ss, spec.timeout)\r\n            };\r\n            else\r\n                t = ss;\r\n\r\n            // Promesas : el scheduling solo se va a ejecutar una vez.\r\n\r\n            if (spec.when!=undefined) {\r\n                if (this.listeners[spec.when]===undefined)\r\n                    this.listeners[spec.when] = SMCPromise();\r\n                this.listeners[spec.when].then(t);\r\n                return localPromise;\r\n            }\r\n\r\n            // Eventos : el scheduling se va a ejecutar tantas veces como ocurra el evento.\r\n        if(spec.every!=undefined)\r\n        {\r\n            if(m.listenerCallbacks[spec.every]==undefined)\r\n                m.listenerCallbacks[spec.every]=[];\r\n            m.listenerCallbacks[spec.every].push(cb);\r\n            return;\r\n        }\r\n        // Para el scroll scheduler\r\n            if (spec.offset){\r\n                m.scrollScheduler.schedule(spec).then(t);\r\n            }\r\n        // En cualquier otro caso, se ejecuta directamente la resolucion de la promesa.\r\n         t.apply(null);\r\n\r\n        return localPromise;\r\n    }\r\n    // Se aniade un listener, en caso de que cb==undefined. Si no, se aniade un listenerCallback, lo cual tiene sentido si el evento que se espera es un \"every\".\r\n    addListener(ev,cb)\r\n    {\r\n        let prom=buildEventPromise();\r\n        if(cb != undefined)\r\n        {\r\n            this.listenerCallbacks[ev].push(cb);\r\n            this.listeners[ev].then(cb);\r\n        }\r\n        return prom;\r\n    }\r\n    fire(ev) {\r\n    if(this.listenerCallbacks[ev]!=undefined)\r\n        this.listenerCallbacks[ev].map(function(f){f.apply()});\r\n    };\r\n}","export default class Timing {\r\n\r\n    static relative() {\r\n        switch(Timing.timingType)\r\n        {\r\n            case 0:{return null;}\r\n            case 1:{return Timing.timestamp()-performance.timing.navigationStart;}\r\n            case 2:{return performance.now();}\r\n        }\r\n    }\r\n\r\n    static timestamp() {\r\n        return new Date().getTime();\r\n    }\r\n    static beginMeasuring()\r\n    {\r\n        let start=Timing.timestamp();\r\n        return {end:function(){return Timing.timestamp()-start;}}\r\n    }\r\n\r\n    static getTimings(w = top) {\r\n        if (w.performance.getEntriesByType) {\r\n            let res = w.performance.getEntriesByType(\"navigation\");\r\n            if (res.length == 1) {\r\n                return Timing.getTimingsv2(res[0]);\r\n            }\r\n        }\r\n        return Timing.getTimingsv1();\r\n    }\r\n\r\n    static getTimingsv2(props) {\r\n        return {\r\n            timingsVersion: 2,\r\n            navigationStart: Timing.timestamp()-Timing.relative(),\r\n            loadTime: props.domComplete,\r\n            loadEventTime: props.loadEventEnd - props.loadEventStart,\r\n            readyTime: props.domInteractive,\r\n            readyEventTime: props.domContentLoadedEventEnd - props.domContentLoadedEventStart,\r\n            networkTime: props.responseEnd - props.requestStart,\r\n            transferSize: props.transferSize,\r\n            decodedBodySize: props.decodedBodySize\r\n        };\r\n    }\r\n\r\n    static getTimingsv1() {\r\n        let base = performance.timing;\r\n        if (base === undefined) {\r\n            return {\r\n                timingsVersion: 0,\r\n                navigationStart:null,\r\n                loadTime: null,\r\n                loadEventTime: null,\r\n                readyTime: null,\r\n                readyEventTime: null,\r\n                networkTime: null,\r\n                transferSize: null,\r\n                decodedBodySize: null\r\n            };\r\n        }\r\n        let reference = base.connectStart;\r\n        return {\r\n            timingsVersion: 1,\r\n            navigationStart: reference,\r\n            loadTime: base.domComplete - reference,\r\n            loadEventTime: base.loadEventEnd - base.loadEventStart,\r\n            readyTime: base.domInteractive - reference,\r\n            readyEventTime: base.domContentLoadedEventEnd - base.domContentLoadedEventStart,\r\n            networkTime: base.responseEnd - base.requestStart,\r\n            transferSize: null,\r\n            decodedBodySize: null\r\n        }\r\n    }\r\n}\r\nif (window.performance.getEntriesByType)\r\n    Timing.timingType=2;\r\nelse\r\n{\r\n    if(window.performance.timing)\r\n        Timing.timingType=1;\r\n    else {\r\n        Timing.timingType = 0;\r\n    }\r\n}\r\n","// FROM : https://github.com/kelektiv/node-uuid\r\n\r\n// Unique ID creation requires a high quality random # generator.  In the\r\n// browser this is a little complicated due to unknown quality of Math.random()\r\n// and inconsistent support for the `crypto` API.  We do the best we can via\r\n// feature-detection\r\n\r\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\r\n// implementation. Also, find the complete implementation of crypto on IE11.\r\nvar rng=null;\r\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\r\n    (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\r\n\r\nif (getRandomValues) {\r\n    // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\r\n    var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\r\n    rng=function() {\r\n        getRandomValues(rnds8);\r\n        return rnds8;\r\n    };\r\n} else {\r\n    // Math.random()-based (RNG)\r\n    //\r\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\r\n    // quality.\r\n    var rnds = new Array(16);\r\n\r\n    rng = function() {\r\n        for (var i = 0, r; i < 16; i++) {\r\n            if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\r\n            rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\r\n        }\r\n\r\n        return rnds;\r\n    };\r\n}\r\n\r\nvar byteToHex = [];\r\nfor (var i = 0; i < 256; ++i) {\r\n    byteToHex[i] = (i + 0x100).toString(16).substr(1);\r\n}\r\n\r\nfunction bytesToUuid(buf, offset) {\r\n    var i = offset || 0;\r\n    var bth = byteToHex;\r\n    // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\r\n    return ([bth[buf[i++]], bth[buf[i++]],\r\n        bth[buf[i++]], bth[buf[i++]], '-',\r\n        bth[buf[i++]], bth[buf[i++]], '-',\r\n        bth[buf[i++]], bth[buf[i++]], '-',\r\n        bth[buf[i++]], bth[buf[i++]], '-',\r\n        bth[buf[i++]], bth[buf[i++]],\r\n        bth[buf[i++]], bth[buf[i++]],\r\n        bth[buf[i++]], bth[buf[i++]]]).join('');\r\n}\r\n\r\n// Implementa UUID v4 de esa lilbreria.\r\nexport default function UUID(options, buf, offset)\r\n{\r\n        var rnds = rng();\r\n        // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\r\n        rnds[6] = (rnds[6] & 0x0f) | 0x40;\r\n        rnds[8] = (rnds[8] & 0x3f) | 0x80;\r\n        return bytesToUuid(rnds);\r\n}","export class UrlInfo\r\n{\r\n    constructor(url)\r\n    {\r\n        this.alink=document.createElement(\"a\");\r\n        this.alink.href=url;\r\n    }\r\n    getUrl()\r\n    {\r\n        return this.alink.href;\r\n    }\r\n    getProtocol()\r\n    {\r\n        return this.alink.protocol;\r\n    }\r\n    getHost()\r\n    {\r\n        return this.alink.host;\r\n    }\r\n    getRootHost()\r\n    {\r\n        let exceptions=[\"co.uk\",\"co.br\"];\r\n        let dom=this.getHost();\r\n        let nParts=2;\r\n        // se elimina el puerto si existe.\r\n        let np=dom.split(\":\");\r\n        dom=np[0];\r\n        let domSp=dom.split(\".\");\r\n        // Si todos los elementos del dominio son numericos, es una direccion IP, y la de\r\n        if(domSp.filter(function(i){return parseInt(i)==i;}).length==domSp.length)\r\n            return dom;\r\n\r\n        for(let h=0;h<exceptions.length;h++)\r\n        {\r\n\r\n            let pos=dom.lastIndexOf(\".\"+exceptions[h]);\r\n            if(pos>0 && pos+sl==dom.length) {\r\n                nParts = exceptions[k].split(\".\").length + 1;\r\n                break;\r\n            }\r\n        }\r\n        return dom.split(\".\").reverse().slice(0,nParts).reverse().join(\".\");\r\n    }\r\n    getPath()\r\n    {\r\n        return this.alink.pathname;\r\n    }\r\n    getPathParts()\r\n    {\r\n        return this.alink.pathname.split(\"/\").filter(function(it){return it==\"\"?null:it;});\r\n    }\r\n}\r\n","export function isFunction(f) {\r\n    return typeof f == 'function';\r\n}\r\nexport function isObject(f) {\r\n    return typeof f == 'object';\r\n}\r\n\r\nexport  function isArray  (l) {\r\n    return l.constructor.toString().indexOf(\"Array\")>0;\r\n};\r\nexport function isString(l)\r\n{\r\n    return typeof l===\"string\";\r\n}\r\nexport  function isset  (l) {\r\n    return typeof l != \"undefined\";\r\n};\r\nexport function issetOr (l, o) {\r\n    return isset(l) ? l : o;\r\n};\r\nfunction isMergeableObject(val) {\r\n    var nonNullObject = val && typeof val === 'object'\r\n\r\n    return nonNullObject\r\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\r\n        && Object.prototype.toString.call(val) !== '[object Date]'\r\n}\r\n\r\nfunction emptyTarget(val) {\r\n    return Array.isArray(val) ? [] : {}\r\n}\r\n\r\nfunction cloneIfNecessary(value, optionsArgument) {\r\n    var clone = optionsArgument && optionsArgument.clone === true\r\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\r\n}\r\n\r\nfunction defaultArrayMerge(target, source, optionsArgument) {\r\n    var destination = target.slice()\r\n    source.forEach(function(e, i) {\r\n        if (typeof destination[i] === 'undefined') {\r\n            destination[i] = cloneIfNecessary(e, optionsArgument)\r\n        } else if (isMergeableObject(e)) {\r\n            destination[i] = deepmerge(target[i], e, optionsArgument)\r\n        } else if (target.indexOf(e) === -1) {\r\n            destination.push(cloneIfNecessary(e, optionsArgument))\r\n        }\r\n    })\r\n    return destination\r\n}\r\n\r\nfunction mergeObject(target, source, optionsArgument) {\r\n    var destination = {}\r\n    if (isMergeableObject(target)) {\r\n        Object.keys(target).forEach(function (key) {\r\n            destination[key] = cloneIfNecessary(target[key], optionsArgument)\r\n        })\r\n    }\r\n    Object.keys(source).forEach(function (key) {\r\n        if (!isMergeableObject(source[key]) || !target[key]) {\r\n            destination[key] = cloneIfNecessary(source[key], optionsArgument)\r\n        } else {\r\n            destination[key] = deepmerge(target[key], source[key], optionsArgument)\r\n        }\r\n    })\r\n    return destination\r\n}\r\n\r\nexport function deepmerge(target, source, optionsArgument) {\r\n    var array = Array.isArray(source);\r\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge }\r\n    var arrayMerge = options.arrayMerge || defaultArrayMerge\r\n\r\n    if (array) {\r\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\r\n    } else {\r\n        return mergeObject(target, source, optionsArgument)\r\n    }\r\n}\r\n\r\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\r\n    if (!Array.isArray(array) || array.length < 2) {\r\n        throw new Error('first argument should be an array with at least two elements')\r\n    }\r\n\r\n    // we are sure there are at least 2 values, so it is safe to have no initial value\r\n    return array.reduce(function(prev, next) {\r\n        return deepmerge(prev, next, optionsArgument)\r\n    })\r\n}\r\n\r\n","import * as Parser from \"../Parser/Conditionals\"\r\nexport default class ConditionalConfig\r\n{\r\n    constructor(config,properties)\r\n    {\r\n        this.config=config;\r\n        this.properties=properties;\r\n        //Parser.parse\r\n    }\r\n    parse()\r\n    {\r\n        return this.traverse(this.config);\r\n    }\r\n\r\n    checkCond(obj)\r\n    {\r\n        if(obj===null || obj===undefined)\r\n            return obj;\r\n\r\n        switch(typeof obj.cond)\r\n        {\r\n            case \"undefined\":{return obj;}\r\n            case \"string\":{return Parser.parse(obj.cond,{properties:this.properties})}\r\n            default:\r\n            {\r\n                if(typeof obj.cond.expr==\"undefined\")\r\n                    return obj;\r\n                let b=Parser.parse(obj.cond.expr,{properties:this.properties});\r\n                if(b && obj.cond.onTrue!=undefined)\r\n                    return obj.cond.onTrue;\r\n                if(!b && obj.cond.onFalse!=undefined)\r\n                    return obj.cond.onFalse;\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    traverse (x) {\r\n        if (Object.prototype.toString.call(x) === '[object Array]')\r\n        {\r\n            return this.traverseArray(x)\r\n        } else if ((typeof x === 'object') && (x !== null)) {\r\n            return this.traverseObject(x)\r\n        } else {\r\n            return x;\r\n        }\r\n    }\r\n    traverseArray (arr) {\r\n        let result=[];\r\n        arr.forEach((x)=> {\r\n            let newVal=this.checkCond(x);\r\n            result.push(this.traverse(newVal))\r\n        })\r\n        return result;\r\n    }\r\n    traverseObject (obj) {\r\n        var result={};\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                let newVal=this.checkCond(obj[key]);\r\n                result[key]=this.traverse(newVal);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n}","import * as Common from \"../Common\";\r\nexport default class BaseLogger\r\n{\r\n    constructor(config)\r\n    {\r\n        this.globalLog={};\r\n        this.adLog={};\r\n        this.requestLog={};\r\n        this.config=config;\r\n    }\r\n    initialize()\r\n    {\r\n\r\n    }\r\n    log(text)\r\n    {\r\n        console.log(text);\r\n    }\r\n    logGlobal(data)\r\n    {\r\n        Common.deepmerge(this.globalLog,data,{});\r\n    }\r\n    logAd(data)\r\n    {\r\n\r\n    }\r\n    logRequest(data)\r\n    {\r\n        let reqId=data.id;\r\n        if(typeof this.requestLog[id]===undefined)\r\n            return this.requestLog[id]=data;\r\n        else\r\n            Common.deepmerge( this.requestLog[id],data,{});\r\n    }\r\n    debug(text)\r\n    {\r\n        if(typeof text===\"string\")\r\n            return console.log(text);\r\n        console.dir(text);\r\n    }\r\n}","import BaseLogger from './BaseLogger';\r\nimport * as Common from '../Common.js';\r\nexport default class ConsoleLogger extends BaseLogger\r\n{\r\n    debug(txt)\r\n    {\r\n        if(!Common.isArray(txt))\r\n            txt=[txt];\r\n        for(var k=0;k<txt.length;k++)\r\n        {\r\n            if(typeof txt[k]===\"string\")\r\n                console.log(txt[k]);\r\n            else\r\n                console.dir(txt[k]);\r\n        }\r\n    }\r\n    log(index,sourceData,inmediate=0)\r\n    {\r\n        let dstam=new Date();\r\n\r\n        for(let k in sourceData)\r\n        {\r\n            let c=sourceData[k];\r\n            console.debug(\"[\"+index+\"]\"+k);\r\n            for(let j in c)\r\n            {\r\n                console.debug(\"[\"+index+\"]:\"+k+\":\"+j+\"=\"+c[j]);\r\n            }\r\n        }\r\n    }\r\n}","import {isset} from \"./Common\";\r\nimport SMCPromise from \"./Arch/SMCPromise\";\r\n\r\nexport function asyncLoad (url, notAsync) {\r\n    var p = SMCPromise();\r\n    var pbjsEl = document.createElement(\"script\");\r\n    pbjsEl.type = \"text/javascript\";\r\n    if (!isset(notAsync) || notAsync == false) pbjsEl.async = true;\r\n    pbjsEl.src = url;\r\n    if (document.body) document.body.appendChild(pbjsEl);\r\n    else {\r\n        var pbjsTargetEl = document.getElementsByTagName(\"head\")[0];\r\n        pbjsTargetEl.insertBefore(pbjsEl, pbjsTargetEl.firstChild);\r\n    }\r\n    pbjsEl.onload = pbjsEl.onreadystatechange =  ()=> {\r\n        pbjsEl.onload = pbjsEl.onreadystatechange = null;\r\n        p(true);\r\n    };\r\n    return p;\r\n};","/*\r\n  DEFINICION DEL PARSER usando PEG.js : https://pegjs.org/online\r\n  Al constructor, en el objeto options, se pasa una propiedad \"properties\", que son los objetos\r\n  que se pueden consultar desde las reglas.\r\n  A este objeto properties se le aade una funcion rand();\r\n  Sobre el parser generado, hay que hacer una modificacion, que es:\r\n  Hay un parametro \"options\" pasado al metodo parse que hay que hacer que est disponible\r\n  en el mtodo resolveProperty.Para ello, ese parametro se asigna a una variable globlalOptions\r\n  cuyo ambito es la funcion global.\r\n\r\n{\r\n\r\n    var properties={\r\n        \"rand\":function(){return parseInt(Math.random()*100);},\r\n        \"a\":{\r\n            \"d\":function(){\r\n                return \"hola\";\r\n            },\r\n            \"b\":{\r\n                \"c\":99\r\n            }\r\n            ,\r\n            \"e\":function(a,b,c){console.log(\"A VALE \"+c);}\r\n        }\r\n    };\r\n    function resolveProperty(obj,subProps)\r\n    {\r\n        var root=properties[obj];\r\n        var i=0;\r\n        while(i<subProps.length && typeof root!=\"undefined\")\r\n            root=root[subProps[i++]];\r\n        return root;\r\n    }\r\n    function parseCondition(left,operand,right)\r\n    {\r\n        switch(operand)\r\n        {\r\n            case \"==\":{return left==right;}break;\r\n            case \"!=\":{return left != right;}break;\r\n            case \">\":{return parseInt(left)>parseInt(right);}break;\r\n            case \"<\":{return parseInt(left)<parseInt(right);}break;\r\n            case \"matches\":{var r=new RegExp(right);return r.test(left);}\r\n        }\r\n    }\r\n    function parseBoolean(left,more)\r\n    {\r\n        var l=left;\r\n        for(var i=0;i<more.length;i++)\r\n        {\r\n            var c=more[i];\r\n            switch(c[1])\r\n            {\r\n                case \"||\":{l=( l || c[3])}break;\r\n                case \"&&\":{l=( l && c[3])}break;\r\n            }\r\n        }\r\n        return l;\r\n    }\r\n    console.log(\"INIT\");\r\n}\r\nExpression = left:Factor more:( _ operand:( \"&&\" / \"||\") _ right:Factor)* {if(more.length==0)return left; return parseBoolean(left,more);}\r\nFactor = \"(\" _ expr:Expression _ \")\" {return expr;} / Condition\r\nCondition = left:Token _ operand:( \"==\" / \"!=\"/  \">\" / \"<\" / \"matches\" ) _ right:Token {return parseCondition(left,operand,right);}\r\nToken =   prop:PropertyAccess \"(\" params:(_ Token _ (\",\" _ Token)* _)? \")\" { var p=[];if(params!=null){p=[params[1]];params[3].map((item)=>p.push(item[2]))}return prop.apply(null,p); } / PropertyAccess / StringLiteral / Number\r\nPropertyAccess = obj:String subprops:SubProperty* {return resolveProperty(obj,subprops);}\r\nSubProperty = \".\" cad:String {return cad;}\r\nNumber = cad:[0-9]+ {return parseInt(cad.join(\"\"));}\r\nString = cad:([a-zA-Z][a-zA-Z_0-9]*) {return cad[0]+cad[1].join(\"\")}\r\nStringLiteral \"stringLiteral\"\r\n    = '\"' chars:[^\\\"]* '\"' {return chars.join(\"\");}\r\n\r\n_ \"whitespace\"\r\n    = [ \\t\\n\\r]*\r\n\r\n*/\r\n\r\nmodule.exports = /*\r\n * Generated by PEG.js 0.10.0.\r\n *\r\n * http://pegjs.org/\r\n */\r\n    (function() {\r\n        \"use strict\";\r\n        var globalOptions;\r\n        function peg$subclass(child, parent) {\r\n            function ctor() { this.constructor = child; }\r\n            ctor.prototype = parent.prototype;\r\n            child.prototype = new ctor();\r\n        }\r\n\r\n        function peg$SyntaxError(message, expected, found, location) {\r\n            this.message  = message;\r\n            this.expected = expected;\r\n            this.found    = found;\r\n            this.location = location;\r\n            this.name     = \"SyntaxError\";\r\n\r\n            if (typeof Error.captureStackTrace === \"function\") {\r\n                Error.captureStackTrace(this, peg$SyntaxError);\r\n            }\r\n        }\r\n\r\n        peg$subclass(peg$SyntaxError, Error);\r\n\r\n        peg$SyntaxError.buildMessage = function(expected, found) {\r\n            var DESCRIBE_EXPECTATION_FNS = {\r\n                literal: function(expectation) {\r\n                    return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\r\n                },\r\n\r\n                \"class\": function(expectation) {\r\n                    var escapedParts = \"\",\r\n                        i;\r\n\r\n                    for (i = 0; i < expectation.parts.length; i++) {\r\n                        escapedParts += expectation.parts[i] instanceof Array\r\n                            ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\r\n                            : classEscape(expectation.parts[i]);\r\n                    }\r\n\r\n                    return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\r\n                },\r\n\r\n                any: function(expectation) {\r\n                    return \"any character\";\r\n                },\r\n\r\n                end: function(expectation) {\r\n                    return \"end of input\";\r\n                },\r\n\r\n                other: function(expectation) {\r\n                    return expectation.description;\r\n                }\r\n            };\r\n\r\n            function hex(ch) {\r\n                return ch.charCodeAt(0).toString(16).toUpperCase();\r\n            }\r\n\r\n            function literalEscape(s) {\r\n                return s\r\n                    .replace(/\\\\/g, '\\\\\\\\')\r\n                    .replace(/\"/g,  '\\\\\"')\r\n                    .replace(/\\0/g, '\\\\0')\r\n                    .replace(/\\t/g, '\\\\t')\r\n                    .replace(/\\n/g, '\\\\n')\r\n                    .replace(/\\r/g, '\\\\r')\r\n                    .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\r\n                    .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\r\n            }\r\n\r\n            function classEscape(s) {\r\n                return s\r\n                    .replace(/\\\\/g, '\\\\\\\\')\r\n                    .replace(/\\]/g, '\\\\]')\r\n                    .replace(/\\^/g, '\\\\^')\r\n                    .replace(/-/g,  '\\\\-')\r\n                    .replace(/\\0/g, '\\\\0')\r\n                    .replace(/\\t/g, '\\\\t')\r\n                    .replace(/\\n/g, '\\\\n')\r\n                    .replace(/\\r/g, '\\\\r')\r\n                    .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\r\n                    .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\r\n            }\r\n\r\n            function describeExpectation(expectation) {\r\n                return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\r\n            }\r\n\r\n            function describeExpected(expected) {\r\n                var descriptions = new Array(expected.length),\r\n                    i, j;\r\n\r\n                for (i = 0; i < expected.length; i++) {\r\n                    descriptions[i] = describeExpectation(expected[i]);\r\n                }\r\n\r\n                descriptions.sort();\r\n\r\n                if (descriptions.length > 0) {\r\n                    for (i = 1, j = 1; i < descriptions.length; i++) {\r\n                        if (descriptions[i - 1] !== descriptions[i]) {\r\n                            descriptions[j] = descriptions[i];\r\n                            j++;\r\n                        }\r\n                    }\r\n                    descriptions.length = j;\r\n                }\r\n\r\n                switch (descriptions.length) {\r\n                    case 1:\r\n                        return descriptions[0];\r\n\r\n                    case 2:\r\n                        return descriptions[0] + \" or \" + descriptions[1];\r\n\r\n                    default:\r\n                        return descriptions.slice(0, -1).join(\", \")\r\n                            + \", or \"\r\n                            + descriptions[descriptions.length - 1];\r\n                }\r\n            }\r\n\r\n            function describeFound(found) {\r\n                return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\r\n            }\r\n\r\n            return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\r\n        };\r\n\r\n        function peg$parse(input, options) {\r\n            globalOptions=options;\r\n            if(typeof globalOptions.properties==\"undefined\")\r\n                globalOptions.properties={};\r\n            globalOptions.properties.rand=function(){var lastResult=parseInt(Math.random()*100);return lastResult;}\r\n            options = options !== void 0 ? options : {};\r\n\r\n            var peg$FAILED = {},\r\n\r\n                peg$startRuleFunctions = { Expression: peg$parseExpression },\r\n                peg$startRuleFunction  = peg$parseExpression,\r\n\r\n                peg$c0 = \"&&\",\r\n                peg$c1 = peg$literalExpectation(\"&&\", false),\r\n                peg$c2 = \"||\",\r\n                peg$c3 = peg$literalExpectation(\"||\", false),\r\n                peg$c4 = function(left, more) {if(more.length==0)return left; return parseBoolean(left,more);},\r\n                peg$c5 = \"(\",\r\n                peg$c6 = peg$literalExpectation(\"(\", false),\r\n                peg$c7 = \")\",\r\n                peg$c8 = peg$literalExpectation(\")\", false),\r\n                peg$c9 = function(expr) {return expr;},\r\n                peg$c10 = \"==\",\r\n                peg$c11 = peg$literalExpectation(\"==\", false),\r\n                peg$c12 = \"!=\",\r\n                peg$c13 = peg$literalExpectation(\"!=\", false),\r\n                peg$c14 = \">\",\r\n                peg$c15 = peg$literalExpectation(\">\", false),\r\n                peg$c16 = \"<\",\r\n                peg$c17 = peg$literalExpectation(\"<\", false),\r\n                peg$c18 = \"matches\",\r\n                peg$c19 = peg$literalExpectation(\"matches\", false),\r\n                peg$c20 = function(left, operand, right) {return parseCondition(left,operand,right);},\r\n                peg$c21 = \",\",\r\n                peg$c22 = peg$literalExpectation(\",\", false),\r\n                peg$c23 = function(prop, params) { var p=[];if(params!=null){p=[params[1]];params[3].map((item)=>p.push(item[2]))}return prop.apply(null,p); },\r\n                peg$c24 = function(obj, subprops) {return resolveProperty(obj,subprops);},\r\n                peg$c25 = \".\",\r\n                peg$c26 = peg$literalExpectation(\".\", false),\r\n                peg$c27 = function(cad) {return cad;},\r\n                peg$c28 = /^[0-9]/,\r\n                peg$c29 = peg$classExpectation([[\"0\", \"9\"]], false, false),\r\n                peg$c30 = function(cad) {return parseInt(cad.join(\"\"));},\r\n                peg$c31 = /^[a-zA-Z]/,\r\n                peg$c32 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"]], false, false),\r\n                peg$c33 = /^[a-zA-Z_0-9]/,\r\n                peg$c34 = peg$classExpectation([[\"a\", \"z\"], [\"A\", \"Z\"], \"_\", [\"0\", \"9\"]], false, false),\r\n                peg$c35 = function(cad) {return cad[0]+cad[1].join(\"\")},\r\n                peg$c36 = peg$otherExpectation(\"stringLiteral\"),\r\n                peg$c37 = \"\\\"\",\r\n                peg$c38 = peg$literalExpectation(\"\\\"\", false),\r\n                peg$c39 = /^[^\"]/,\r\n                peg$c40 = peg$classExpectation([\"\\\"\"], true, false),\r\n                peg$c41 = function(chars) {return chars.join(\"\");},\r\n                peg$c42 = peg$otherExpectation(\"whitespace\"),\r\n                peg$c43 = /^[ \\t\\n\\r]/,\r\n                peg$c44 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\r\n\r\n                peg$currPos          = 0,\r\n                peg$savedPos         = 0,\r\n                peg$posDetailsCache  = [{ line: 1, column: 1 }],\r\n                peg$maxFailPos       = 0,\r\n                peg$maxFailExpected  = [],\r\n                peg$silentFails      = 0,\r\n\r\n                peg$result;\r\n\r\n            if (\"startRule\" in options) {\r\n                if (!(options.startRule in peg$startRuleFunctions)) {\r\n                    throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\r\n                }\r\n\r\n                peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\r\n            }\r\n\r\n            function text() {\r\n                return input.substring(peg$savedPos, peg$currPos);\r\n            }\r\n\r\n            function location() {\r\n                return peg$computeLocation(peg$savedPos, peg$currPos);\r\n            }\r\n\r\n            function expected(description, location) {\r\n                location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\r\n\r\n                throw peg$buildStructuredError(\r\n                    [peg$otherExpectation(description)],\r\n                    input.substring(peg$savedPos, peg$currPos),\r\n                    location\r\n                );\r\n            }\r\n\r\n            function error(message, location) {\r\n                location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\r\n\r\n                throw peg$buildSimpleError(message, location);\r\n            }\r\n\r\n            function peg$literalExpectation(text, ignoreCase) {\r\n                return { type: \"literal\", text: text, ignoreCase: ignoreCase };\r\n            }\r\n\r\n            function peg$classExpectation(parts, inverted, ignoreCase) {\r\n                return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\r\n            }\r\n\r\n            function peg$anyExpectation() {\r\n                return { type: \"any\" };\r\n            }\r\n\r\n            function peg$endExpectation() {\r\n                return { type: \"end\" };\r\n            }\r\n\r\n            function peg$otherExpectation(description) {\r\n                return { type: \"other\", description: description };\r\n            }\r\n\r\n            function peg$computePosDetails(pos) {\r\n                var details = peg$posDetailsCache[pos], p;\r\n\r\n                if (details) {\r\n                    return details;\r\n                } else {\r\n                    p = pos - 1;\r\n                    while (!peg$posDetailsCache[p]) {\r\n                        p--;\r\n                    }\r\n\r\n                    details = peg$posDetailsCache[p];\r\n                    details = {\r\n                        line:   details.line,\r\n                        column: details.column\r\n                    };\r\n\r\n                    while (p < pos) {\r\n                        if (input.charCodeAt(p) === 10) {\r\n                            details.line++;\r\n                            details.column = 1;\r\n                        } else {\r\n                            details.column++;\r\n                        }\r\n\r\n                        p++;\r\n                    }\r\n\r\n                    peg$posDetailsCache[pos] = details;\r\n                    return details;\r\n                }\r\n            }\r\n\r\n            function peg$computeLocation(startPos, endPos) {\r\n                var startPosDetails = peg$computePosDetails(startPos),\r\n                    endPosDetails   = peg$computePosDetails(endPos);\r\n\r\n                return {\r\n                    start: {\r\n                        offset: startPos,\r\n                        line:   startPosDetails.line,\r\n                        column: startPosDetails.column\r\n                    },\r\n                    end: {\r\n                        offset: endPos,\r\n                        line:   endPosDetails.line,\r\n                        column: endPosDetails.column\r\n                    }\r\n                };\r\n            }\r\n\r\n            function peg$fail(expected) {\r\n                if (peg$currPos < peg$maxFailPos) { return; }\r\n\r\n                if (peg$currPos > peg$maxFailPos) {\r\n                    peg$maxFailPos = peg$currPos;\r\n                    peg$maxFailExpected = [];\r\n                }\r\n\r\n                peg$maxFailExpected.push(expected);\r\n            }\r\n\r\n            function peg$buildSimpleError(message, location) {\r\n                return new peg$SyntaxError(message, null, null, location);\r\n            }\r\n\r\n            function peg$buildStructuredError(expected, found, location) {\r\n                return new peg$SyntaxError(\r\n                    peg$SyntaxError.buildMessage(expected, found),\r\n                    expected,\r\n                    found,\r\n                    location\r\n                );\r\n            }\r\n\r\n            function peg$parseExpression() {\r\n                var s0, s1, s2, s3, s4, s5, s6, s7;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = peg$parseFactor();\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = [];\r\n                    s3 = peg$currPos;\r\n                    s4 = peg$parse_();\r\n                    if (s4 !== peg$FAILED) {\r\n                        if (input.substr(peg$currPos, 2) === peg$c0) {\r\n                            s5 = peg$c0;\r\n                            peg$currPos += 2;\r\n                        } else {\r\n                            s5 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c1); }\r\n                        }\r\n                        if (s5 === peg$FAILED) {\r\n                            if (input.substr(peg$currPos, 2) === peg$c2) {\r\n                                s5 = peg$c2;\r\n                                peg$currPos += 2;\r\n                            } else {\r\n                                s5 = peg$FAILED;\r\n                                if (peg$silentFails === 0) { peg$fail(peg$c3); }\r\n                            }\r\n                        }\r\n                        if (s5 !== peg$FAILED) {\r\n                            s6 = peg$parse_();\r\n                            if (s6 !== peg$FAILED) {\r\n                                s7 = peg$parseFactor();\r\n                                if (s7 !== peg$FAILED) {\r\n                                    s4 = [s4, s5, s6, s7];\r\n                                    s3 = s4;\r\n                                } else {\r\n                                    peg$currPos = s3;\r\n                                    s3 = peg$FAILED;\r\n                                }\r\n                            } else {\r\n                                peg$currPos = s3;\r\n                                s3 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s3;\r\n                            s3 = peg$FAILED;\r\n                        }\r\n                    } else {\r\n                        peg$currPos = s3;\r\n                        s3 = peg$FAILED;\r\n                    }\r\n                    while (s3 !== peg$FAILED) {\r\n                        s2.push(s3);\r\n                        s3 = peg$currPos;\r\n                        s4 = peg$parse_();\r\n                        if (s4 !== peg$FAILED) {\r\n                            if (input.substr(peg$currPos, 2) === peg$c0) {\r\n                                s5 = peg$c0;\r\n                                peg$currPos += 2;\r\n                            } else {\r\n                                s5 = peg$FAILED;\r\n                                if (peg$silentFails === 0) { peg$fail(peg$c1); }\r\n                            }\r\n                            if (s5 === peg$FAILED) {\r\n                                if (input.substr(peg$currPos, 2) === peg$c2) {\r\n                                    s5 = peg$c2;\r\n                                    peg$currPos += 2;\r\n                                } else {\r\n                                    s5 = peg$FAILED;\r\n                                    if (peg$silentFails === 0) { peg$fail(peg$c3); }\r\n                                }\r\n                            }\r\n                            if (s5 !== peg$FAILED) {\r\n                                s6 = peg$parse_();\r\n                                if (s6 !== peg$FAILED) {\r\n                                    s7 = peg$parseFactor();\r\n                                    if (s7 !== peg$FAILED) {\r\n                                        s4 = [s4, s5, s6, s7];\r\n                                        s3 = s4;\r\n                                    } else {\r\n                                        peg$currPos = s3;\r\n                                        s3 = peg$FAILED;\r\n                                    }\r\n                                } else {\r\n                                    peg$currPos = s3;\r\n                                    s3 = peg$FAILED;\r\n                                }\r\n                            } else {\r\n                                peg$currPos = s3;\r\n                                s3 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s3;\r\n                            s3 = peg$FAILED;\r\n                        }\r\n                    }\r\n                    if (s2 !== peg$FAILED) {\r\n                        peg$savedPos = s0;\r\n                        s1 = peg$c4(s1, s2);\r\n                        s0 = s1;\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseFactor() {\r\n                var s0, s1, s2, s3, s4, s5;\r\n\r\n                s0 = peg$currPos;\r\n                if (input.charCodeAt(peg$currPos) === 40) {\r\n                    s1 = peg$c5;\r\n                    peg$currPos++;\r\n                } else {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c6); }\r\n                }\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = peg$parse_();\r\n                    if (s2 !== peg$FAILED) {\r\n                        s3 = peg$parseExpression();\r\n                        if (s3 !== peg$FAILED) {\r\n                            s4 = peg$parse_();\r\n                            if (s4 !== peg$FAILED) {\r\n                                if (input.charCodeAt(peg$currPos) === 41) {\r\n                                    s5 = peg$c7;\r\n                                    peg$currPos++;\r\n                                } else {\r\n                                    s5 = peg$FAILED;\r\n                                    if (peg$silentFails === 0) { peg$fail(peg$c8); }\r\n                                }\r\n                                if (s5 !== peg$FAILED) {\r\n                                    peg$savedPos = s0;\r\n                                    s1 = peg$c9(s3);\r\n                                    s0 = s1;\r\n                                } else {\r\n                                    peg$currPos = s0;\r\n                                    s0 = peg$FAILED;\r\n                                }\r\n                            } else {\r\n                                peg$currPos = s0;\r\n                                s0 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s0;\r\n                            s0 = peg$FAILED;\r\n                        }\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n                if (s0 === peg$FAILED) {\r\n                    s0 = peg$parseCondition();\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseCondition() {\r\n                var s0, s1, s2, s3, s4, s5;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = peg$parseToken();\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = peg$parse_();\r\n                    if (s2 !== peg$FAILED) {\r\n                        if (input.substr(peg$currPos, 2) === peg$c10) {\r\n                            s3 = peg$c10;\r\n                            peg$currPos += 2;\r\n                        } else {\r\n                            s3 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c11); }\r\n                        }\r\n                        if (s3 === peg$FAILED) {\r\n                            if (input.substr(peg$currPos, 2) === peg$c12) {\r\n                                s3 = peg$c12;\r\n                                peg$currPos += 2;\r\n                            } else {\r\n                                s3 = peg$FAILED;\r\n                                if (peg$silentFails === 0) { peg$fail(peg$c13); }\r\n                            }\r\n                            if (s3 === peg$FAILED) {\r\n                                if (input.charCodeAt(peg$currPos) === 62) {\r\n                                    s3 = peg$c14;\r\n                                    peg$currPos++;\r\n                                } else {\r\n                                    s3 = peg$FAILED;\r\n                                    if (peg$silentFails === 0) { peg$fail(peg$c15); }\r\n                                }\r\n                                if (s3 === peg$FAILED) {\r\n                                    if (input.charCodeAt(peg$currPos) === 60) {\r\n                                        s3 = peg$c16;\r\n                                        peg$currPos++;\r\n                                    } else {\r\n                                        s3 = peg$FAILED;\r\n                                        if (peg$silentFails === 0) { peg$fail(peg$c17); }\r\n                                    }\r\n                                    if (s3 === peg$FAILED) {\r\n                                        if (input.substr(peg$currPos, 7) === peg$c18) {\r\n                                            s3 = peg$c18;\r\n                                            peg$currPos += 7;\r\n                                        } else {\r\n                                            s3 = peg$FAILED;\r\n                                            if (peg$silentFails === 0) { peg$fail(peg$c19); }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        if (s3 !== peg$FAILED) {\r\n                            s4 = peg$parse_();\r\n                            if (s4 !== peg$FAILED) {\r\n                                s5 = peg$parseToken();\r\n                                if (s5 !== peg$FAILED) {\r\n                                    peg$savedPos = s0;\r\n                                    s1 = peg$c20(s1, s3, s5);\r\n                                    s0 = s1;\r\n                                } else {\r\n                                    peg$currPos = s0;\r\n                                    s0 = peg$FAILED;\r\n                                }\r\n                            } else {\r\n                                peg$currPos = s0;\r\n                                s0 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s0;\r\n                            s0 = peg$FAILED;\r\n                        }\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseToken() {\r\n                var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = peg$parsePropertyAccess();\r\n                if (s1 !== peg$FAILED) {\r\n                    if (input.charCodeAt(peg$currPos) === 40) {\r\n                        s2 = peg$c5;\r\n                        peg$currPos++;\r\n                    } else {\r\n                        s2 = peg$FAILED;\r\n                        if (peg$silentFails === 0) { peg$fail(peg$c6); }\r\n                    }\r\n                    if (s2 !== peg$FAILED) {\r\n                        s3 = peg$currPos;\r\n                        s4 = peg$parse_();\r\n                        if (s4 !== peg$FAILED) {\r\n                            s5 = peg$parseToken();\r\n                            if (s5 !== peg$FAILED) {\r\n                                s6 = peg$parse_();\r\n                                if (s6 !== peg$FAILED) {\r\n                                    s7 = [];\r\n                                    s8 = peg$currPos;\r\n                                    if (input.charCodeAt(peg$currPos) === 44) {\r\n                                        s9 = peg$c21;\r\n                                        peg$currPos++;\r\n                                    } else {\r\n                                        s9 = peg$FAILED;\r\n                                        if (peg$silentFails === 0) { peg$fail(peg$c22); }\r\n                                    }\r\n                                    if (s9 !== peg$FAILED) {\r\n                                        s10 = peg$parse_();\r\n                                        if (s10 !== peg$FAILED) {\r\n                                            s11 = peg$parseToken();\r\n                                            if (s11 !== peg$FAILED) {\r\n                                                s9 = [s9, s10, s11];\r\n                                                s8 = s9;\r\n                                            } else {\r\n                                                peg$currPos = s8;\r\n                                                s8 = peg$FAILED;\r\n                                            }\r\n                                        } else {\r\n                                            peg$currPos = s8;\r\n                                            s8 = peg$FAILED;\r\n                                        }\r\n                                    } else {\r\n                                        peg$currPos = s8;\r\n                                        s8 = peg$FAILED;\r\n                                    }\r\n                                    while (s8 !== peg$FAILED) {\r\n                                        s7.push(s8);\r\n                                        s8 = peg$currPos;\r\n                                        if (input.charCodeAt(peg$currPos) === 44) {\r\n                                            s9 = peg$c21;\r\n                                            peg$currPos++;\r\n                                        } else {\r\n                                            s9 = peg$FAILED;\r\n                                            if (peg$silentFails === 0) { peg$fail(peg$c22); }\r\n                                        }\r\n                                        if (s9 !== peg$FAILED) {\r\n                                            s10 = peg$parse_();\r\n                                            if (s10 !== peg$FAILED) {\r\n                                                s11 = peg$parseToken();\r\n                                                if (s11 !== peg$FAILED) {\r\n                                                    s9 = [s9, s10, s11];\r\n                                                    s8 = s9;\r\n                                                } else {\r\n                                                    peg$currPos = s8;\r\n                                                    s8 = peg$FAILED;\r\n                                                }\r\n                                            } else {\r\n                                                peg$currPos = s8;\r\n                                                s8 = peg$FAILED;\r\n                                            }\r\n                                        } else {\r\n                                            peg$currPos = s8;\r\n                                            s8 = peg$FAILED;\r\n                                        }\r\n                                    }\r\n                                    if (s7 !== peg$FAILED) {\r\n                                        s8 = peg$parse_();\r\n                                        if (s8 !== peg$FAILED) {\r\n                                            s4 = [s4, s5, s6, s7, s8];\r\n                                            s3 = s4;\r\n                                        } else {\r\n                                            peg$currPos = s3;\r\n                                            s3 = peg$FAILED;\r\n                                        }\r\n                                    } else {\r\n                                        peg$currPos = s3;\r\n                                        s3 = peg$FAILED;\r\n                                    }\r\n                                } else {\r\n                                    peg$currPos = s3;\r\n                                    s3 = peg$FAILED;\r\n                                }\r\n                            } else {\r\n                                peg$currPos = s3;\r\n                                s3 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s3;\r\n                            s3 = peg$FAILED;\r\n                        }\r\n                        if (s3 === peg$FAILED) {\r\n                            s3 = null;\r\n                        }\r\n                        if (s3 !== peg$FAILED) {\r\n                            if (input.charCodeAt(peg$currPos) === 41) {\r\n                                s4 = peg$c7;\r\n                                peg$currPos++;\r\n                            } else {\r\n                                s4 = peg$FAILED;\r\n                                if (peg$silentFails === 0) { peg$fail(peg$c8); }\r\n                            }\r\n                            if (s4 !== peg$FAILED) {\r\n                                peg$savedPos = s0;\r\n                                s1 = peg$c23(s1, s3);\r\n                                s0 = s1;\r\n                            } else {\r\n                                peg$currPos = s0;\r\n                                s0 = peg$FAILED;\r\n                            }\r\n                        } else {\r\n                            peg$currPos = s0;\r\n                            s0 = peg$FAILED;\r\n                        }\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n                if (s0 === peg$FAILED) {\r\n                    s0 = peg$parsePropertyAccess();\r\n                    if (s0 === peg$FAILED) {\r\n                        s0 = peg$parseStringLiteral();\r\n                        if (s0 === peg$FAILED) {\r\n                            s0 = peg$parseNumber();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parsePropertyAccess() {\r\n                var s0, s1, s2, s3;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = peg$parseString();\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = [];\r\n                    s3 = peg$parseSubProperty();\r\n                    while (s3 !== peg$FAILED) {\r\n                        s2.push(s3);\r\n                        s3 = peg$parseSubProperty();\r\n                    }\r\n                    if (s2 !== peg$FAILED) {\r\n                        peg$savedPos = s0;\r\n                        s1 = peg$c24(s1, s2);\r\n                        s0 = s1;\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseSubProperty() {\r\n                var s0, s1, s2;\r\n\r\n                s0 = peg$currPos;\r\n                if (input.charCodeAt(peg$currPos) === 46) {\r\n                    s1 = peg$c25;\r\n                    peg$currPos++;\r\n                } else {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c26); }\r\n                }\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = peg$parseString();\r\n                    if (s2 !== peg$FAILED) {\r\n                        peg$savedPos = s0;\r\n                        s1 = peg$c27(s2);\r\n                        s0 = s1;\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseNumber() {\r\n                var s0, s1, s2;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = [];\r\n                if (peg$c28.test(input.charAt(peg$currPos))) {\r\n                    s2 = input.charAt(peg$currPos);\r\n                    peg$currPos++;\r\n                } else {\r\n                    s2 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c29); }\r\n                }\r\n                if (s2 !== peg$FAILED) {\r\n                    while (s2 !== peg$FAILED) {\r\n                        s1.push(s2);\r\n                        if (peg$c28.test(input.charAt(peg$currPos))) {\r\n                            s2 = input.charAt(peg$currPos);\r\n                            peg$currPos++;\r\n                        } else {\r\n                            s2 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c29); }\r\n                        }\r\n                    }\r\n                } else {\r\n                    s1 = peg$FAILED;\r\n                }\r\n                if (s1 !== peg$FAILED) {\r\n                    peg$savedPos = s0;\r\n                    s1 = peg$c30(s1);\r\n                }\r\n                s0 = s1;\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseString() {\r\n                var s0, s1, s2, s3, s4;\r\n\r\n                s0 = peg$currPos;\r\n                s1 = peg$currPos;\r\n                if (peg$c31.test(input.charAt(peg$currPos))) {\r\n                    s2 = input.charAt(peg$currPos);\r\n                    peg$currPos++;\r\n                } else {\r\n                    s2 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c32); }\r\n                }\r\n                if (s2 !== peg$FAILED) {\r\n                    s3 = [];\r\n                    if (peg$c33.test(input.charAt(peg$currPos))) {\r\n                        s4 = input.charAt(peg$currPos);\r\n                        peg$currPos++;\r\n                    } else {\r\n                        s4 = peg$FAILED;\r\n                        if (peg$silentFails === 0) { peg$fail(peg$c34); }\r\n                    }\r\n                    while (s4 !== peg$FAILED) {\r\n                        s3.push(s4);\r\n                        if (peg$c33.test(input.charAt(peg$currPos))) {\r\n                            s4 = input.charAt(peg$currPos);\r\n                            peg$currPos++;\r\n                        } else {\r\n                            s4 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c34); }\r\n                        }\r\n                    }\r\n                    if (s3 !== peg$FAILED) {\r\n                        s2 = [s2, s3];\r\n                        s1 = s2;\r\n                    } else {\r\n                        peg$currPos = s1;\r\n                        s1 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s1;\r\n                    s1 = peg$FAILED;\r\n                }\r\n                if (s1 !== peg$FAILED) {\r\n                    peg$savedPos = s0;\r\n                    s1 = peg$c35(s1);\r\n                }\r\n                s0 = s1;\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parseStringLiteral() {\r\n                var s0, s1, s2, s3;\r\n\r\n                peg$silentFails++;\r\n                s0 = peg$currPos;\r\n                if (input.charCodeAt(peg$currPos) === 34) {\r\n                    s1 = peg$c37;\r\n                    peg$currPos++;\r\n                } else {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c38); }\r\n                }\r\n                if (s1 !== peg$FAILED) {\r\n                    s2 = [];\r\n                    if (peg$c39.test(input.charAt(peg$currPos))) {\r\n                        s3 = input.charAt(peg$currPos);\r\n                        peg$currPos++;\r\n                    } else {\r\n                        s3 = peg$FAILED;\r\n                        if (peg$silentFails === 0) { peg$fail(peg$c40); }\r\n                    }\r\n                    while (s3 !== peg$FAILED) {\r\n                        s2.push(s3);\r\n                        if (peg$c39.test(input.charAt(peg$currPos))) {\r\n                            s3 = input.charAt(peg$currPos);\r\n                            peg$currPos++;\r\n                        } else {\r\n                            s3 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c40); }\r\n                        }\r\n                    }\r\n                    if (s2 !== peg$FAILED) {\r\n                        if (input.charCodeAt(peg$currPos) === 34) {\r\n                            s3 = peg$c37;\r\n                            peg$currPos++;\r\n                        } else {\r\n                            s3 = peg$FAILED;\r\n                            if (peg$silentFails === 0) { peg$fail(peg$c38); }\r\n                        }\r\n                        if (s3 !== peg$FAILED) {\r\n                            peg$savedPos = s0;\r\n                            s1 = peg$c41(s2);\r\n                            s0 = s1;\r\n                        } else {\r\n                            peg$currPos = s0;\r\n                            s0 = peg$FAILED;\r\n                        }\r\n                    } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                    }\r\n                } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                }\r\n                peg$silentFails--;\r\n                if (s0 === peg$FAILED) {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c36); }\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n            function peg$parse_() {\r\n                var s0, s1;\r\n\r\n                peg$silentFails++;\r\n                s0 = [];\r\n                if (peg$c43.test(input.charAt(peg$currPos))) {\r\n                    s1 = input.charAt(peg$currPos);\r\n                    peg$currPos++;\r\n                } else {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c44); }\r\n                }\r\n                while (s1 !== peg$FAILED) {\r\n                    s0.push(s1);\r\n                    if (peg$c43.test(input.charAt(peg$currPos))) {\r\n                        s1 = input.charAt(peg$currPos);\r\n                        peg$currPos++;\r\n                    } else {\r\n                        s1 = peg$FAILED;\r\n                        if (peg$silentFails === 0) { peg$fail(peg$c44); }\r\n                    }\r\n                }\r\n                peg$silentFails--;\r\n                if (s0 === peg$FAILED) {\r\n                    s1 = peg$FAILED;\r\n                    if (peg$silentFails === 0) { peg$fail(peg$c42); }\r\n                }\r\n\r\n                return s0;\r\n            }\r\n\r\n\r\n            /*  AQUI VAN LAS OPTIONS  */\r\n\r\n\r\n            function resolveProperty(obj,subProps)\r\n            {\r\n                var root=globalOptions.properties[obj];\r\n                var i=0;\r\n                while(i<subProps.length && typeof root!=\"undefined\")\r\n                    root=root[subProps[i++]];\r\n                return root;\r\n            }\r\n            function parseCondition(left,operand,right)\r\n            {\r\n                switch(operand)\r\n                {\r\n                    case \"==\":{return left==right;}break;\r\n                    case \"!=\":{return left != right;}break;\r\n                    case \">\":{return parseInt(left)>parseInt(right);}break;\r\n                    case \"<\":{return parseInt(left)<parseInt(right);}break;\r\n                    case \"matches\":{var r=new RegExp(right);return r.test(left);}\r\n                }\r\n            }\r\n            function parseBoolean(left,more)\r\n            {\r\n                var l=left;\r\n                for(var i=0;i<more.length;i++)\r\n                {\r\n                    var c=more[i];\r\n                    switch(c[1])\r\n                    {\r\n                        case \"||\":{l=( l || c[3])}break;\r\n                        case \"&&\":{l=( l && c[3])}break;\r\n                    }\r\n                }\r\n                return l;\r\n            }\r\n            console.log(\"INIT\");\r\n\r\n\r\n            peg$result = peg$startRuleFunction();\r\n\r\n            if (peg$result !== peg$FAILED && peg$currPos === input.length) {\r\n                return peg$result;\r\n            } else {\r\n                if (peg$result !== peg$FAILED && peg$currPos < input.length) {\r\n                    peg$fail(peg$endExpectation());\r\n                }\r\n\r\n                throw peg$buildStructuredError(\r\n                    peg$maxFailExpected,\r\n                    peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\r\n                    peg$maxFailPos < input.length\r\n                        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\r\n                        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\r\n                );\r\n            }\r\n        }\r\n\r\n        return {\r\n            SyntaxError: peg$SyntaxError,\r\n            parse:       peg$parse\r\n        };\r\n    })();\r\n","import Promised from '../Arch/Promised';\r\nimport UUID from '../Browser/UUID';\r\nexport default class Service extends Promised {\r\n    constructor(serviceContainer,config) {\r\n        super();\r\n        this.serviceContainer=serviceContainer;\r\n        this.config=config;\r\n        this.logger=serviceContainer.get(\"Log\");\r\n    }\r\n    initialize()\r\n    {\r\n        this.run([\"Configured\",\"Ready\"]);\r\n    }\r\n    onConfigured(){}\r\n    onReady(){}\r\n    getService(name)\r\n    {\r\n        return this.serviceContainer.get(name);\r\n    }\r\n    findService(name)\r\n    {\r\n        return this.serviceContainer.get(name);\r\n    }\r\n    getContainer()\r\n    {\r\n        return this.serviceContainer;\r\n    }\r\n}","/** SERVICECONTAINER_IMPORTS **/\r\nexport default class ServiceContainer\r\n{\r\n    constructor(serviceSpec)\r\n    {\r\n        this.spec=serviceSpec;\r\n        this.services={};\r\n\r\n    }\r\n    initialize()\r\n    {\r\n        /** SERVICECONTAINER_INITIALIZE **/\r\n    }\r\n    // serviceList esta en la forma: {\"<nombre servicio>\":{instance:<Modulo importado>,config:{...}}\r\n    loadServices(serviceList)\r\n    {\r\n        for(let k in serviceList)\r\n        {\r\n            this.services[k]=new (serviceList[k].instance)(this,serviceList[k].config);\r\n        }\r\n        for(let k in this.services)\r\n        {\r\n            this.services[k].initialize();\r\n        }\r\n    }\r\n    get(serviceName)\r\n    {\r\n        if(typeof this.services[serviceName] === undefined)\r\n            throw \"Unknown service :\"+serviceName;\r\n        return this.services[serviceName];\r\n    }\r\n    add(serviceName,service)\r\n    {\r\n        this.services[serviceName]=service;\r\n    }\r\n}"],"sourceRoot":""}